<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Messaging System: Troubleshooting Guide</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Messaging System<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">High-Performance Cross-Platform Messaging Framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d6/dba/md_libraries_2monitoring__system_2docs_2TROUBLESHOOTING.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Troubleshooting Guide</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md1908"></a> </p>
<h1><a class="anchor" id="autotoc_md1909"></a>
Overview</h1>
<p>This guide helps diagnose and resolve common issues with the Monitoring System. Each section includes symptoms, diagnostic steps, and solutions.</p>
<h1><a class="anchor" id="autotoc_md1910"></a>
Quick Diagnostic Commands</h1>
<div class="fragment"><div class="line"># Check system status</div>
<div class="line">./monitoring_cli status</div>
<div class="line"> </div>
<div class="line"># View recent errors</div>
<div class="line">./monitoring_cli errors --last 100</div>
<div class="line"> </div>
<div class="line"># Check health</div>
<div class="line">./monitoring_cli health --verbose</div>
<div class="line"> </div>
<div class="line"># View configuration</div>
<div class="line">./monitoring_cli config --show</div>
<div class="line"> </div>
<div class="line"># Test connectivity</div>
<div class="line">./monitoring_cli test --component all</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md1911"></a>
Common Issues</h1>
<h2><a class="anchor" id="autotoc_md1912"></a>
1. Monitoring System Won't Start</h2>
<h3><a class="anchor" id="autotoc_md1913"></a>
Symptoms</h3>
<ul>
<li>Application crashes on startup</li>
<li>Error messages about initialization failure</li>
<li>Process exits immediately</li>
</ul>
<h3><a class="anchor" id="autotoc_md1914"></a>
Diagnostic Steps</h3>
<div class="fragment"><div class="line"><span class="comment">// Enable debug logging</span></div>
<div class="line">monitoring_config config;</div>
<div class="line">config.log_level = log_level::debug;</div>
<div class="line">config.enable_startup_diagnostics = <span class="keyword">true</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Check initialization result</span></div>
<div class="line"><span class="keyword">auto</span> result = <a class="code hl_namespace" href="../../de/d3f/namespacemonitoring__system.html">monitoring_system</a>.initialize();</div>
<div class="line"><span class="keywordflow">if</span> (!result) {</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;Init failed: &quot;</span> &lt;&lt; result.get_error().message &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">}</div>
<div class="ttc" id="anamespacemonitoring__system_html"><div class="ttname"><a href="../../de/d3f/namespacemonitoring__system.html">monitoring_system</a></div><div class="ttdef"><b>Definition</b> <a href="../../df/d39/monitor__adapter_8h_source.html#l00008">monitor_adapter.h:8</a></div></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md1915"></a>
Solutions</h3>
<p><b>Missing Dependencies:</b> </p><div class="fragment"><div class="line"># Check library dependencies</div>
<div class="line">ldd monitoring_system</div>
<div class="line">otool -L monitoring_system  # macOS</div>
<div class="line"> </div>
<div class="line"># Install missing libraries</div>
<div class="line">apt-get install libstdc++6  # Linux</div>
<div class="line">brew install gcc            # macOS</div>
</div><!-- fragment --><p><b>Permission Issues:</b> </p><div class="fragment"><div class="line"># Check file permissions</div>
<div class="line">ls -la /var/log/monitoring/</div>
<div class="line">ls -la /var/lib/monitoring/</div>
<div class="line"> </div>
<div class="line"># Fix permissions</div>
<div class="line">sudo chown -R $USER:$USER /var/log/monitoring/</div>
<div class="line">sudo chmod 755 /var/log/monitoring/</div>
</div><!-- fragment --><p><b>Port Already in Use:</b> </p><div class="fragment"><div class="line"><span class="comment">// Change port</span></div>
<div class="line">exporter_config config;</div>
<div class="line">config.port = 9091;  <span class="comment">// Use different port</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1916"></a>
2. High Memory Usage</h2>
<h3><a class="anchor" id="autotoc_md1917"></a>
Symptoms</h3>
<ul>
<li>Continuously growing memory consumption</li>
<li>Out of memory errors</li>
<li>System becomes unresponsive</li>
</ul>
<h3><a class="anchor" id="autotoc_md1918"></a>
Diagnostic Steps</h3>
<div class="fragment"><div class="line"><span class="comment">// Enable memory profiling</span></div>
<div class="line">memory_profiler profiler;</div>
<div class="line">profiler.start();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Get memory stats</span></div>
<div class="line"><span class="keyword">auto</span> stats = <a class="code hl_namespace" href="../../de/d3f/namespacemonitoring__system.html">monitoring_system</a>.get_memory_stats();</div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Total allocated: &quot;</span> &lt;&lt; stats.total_allocated_mb &lt;&lt; <span class="stringliteral">&quot; MB\n&quot;</span>;</div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Active objects: &quot;</span> &lt;&lt; stats.active_objects &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Largest allocation: &quot;</span> &lt;&lt; stats.largest_allocation_mb &lt;&lt; <span class="stringliteral">&quot; MB\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Check for leaks</span></div>
<div class="line"><span class="keyword">auto</span> leaks = profiler.detect_leaks();</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; leak : leaks) {</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Potential leak: &quot;</span> &lt;&lt; leak.location &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> </div>
<div class="line">              &lt;&lt; leak.size_bytes &lt;&lt; <span class="stringliteral">&quot; bytes)\n&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md1919"></a>
Solutions</h3>
<p><b>Memory Leaks:</b> </p><div class="fragment"><div class="line"><span class="comment">// Fix circular references</span></div>
<div class="line">std::weak_ptr&lt;Component&gt; weak_ref = component;  <span class="comment">// Use weak_ptr</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Ensure proper cleanup</span></div>
<div class="line"><span class="keyword">class </span>Resource {</div>
<div class="line">    ~Resource() {</div>
<div class="line">        <span class="comment">// Always clean up</span></div>
<div class="line">        <span class="keywordflow">if</span> (buffer_) {</div>
<div class="line">            <span class="keyword">delete</span>[] buffer_;</div>
<div class="line">            buffer_ = <span class="keyword">nullptr</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Use RAII</span></div>
<div class="line"><span class="keyword">auto</span> resource = std::make_unique&lt;Resource&gt;();  <span class="comment">// Automatic cleanup</span></div>
</div><!-- fragment --><p><b>Unbounded Queues:</b> </p><div class="fragment"><div class="line"><span class="comment">// Set queue limits</span></div>
<div class="line">queue_config config;</div>
<div class="line">config.max_size = 10000;</div>
<div class="line">config.overflow_policy = overflow_policy::drop_oldest;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Monitor queue size</span></div>
<div class="line"><span class="keywordflow">if</span> (queue.size() &gt; config.max_size * 0.9) {</div>
<div class="line">    log_warning(<span class="stringliteral">&quot;Queue near capacity: {}&quot;</span>, queue.size());</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>Retention Issues:</b> </p><div class="fragment"><div class="line"><span class="comment">// Configure retention</span></div>
<div class="line">retention_config config;</div>
<div class="line">config.max_age = 24h;</div>
<div class="line">config.max_size_mb = 1000;</div>
<div class="line">config.cleanup_interval = 1h;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1920"></a>
3. High CPU Usage</h2>
<h3><a class="anchor" id="autotoc_md1921"></a>
Symptoms</h3>
<ul>
<li>CPU usage consistently &gt; 10%</li>
<li>Application becomes sluggish</li>
<li>System load increases</li>
</ul>
<h3><a class="anchor" id="autotoc_md1922"></a>
Diagnostic Steps</h3>
<div class="fragment"><div class="line"><span class="comment">// Profile CPU usage</span></div>
<div class="line">cpu_profiler profiler;</div>
<div class="line">profiler.start();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Run for 60 seconds</span></div>
<div class="line">std::this_thread::sleep_for(60s);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Get hotspots</span></div>
<div class="line"><span class="keyword">auto</span> hotspots = profiler.get_hotspots();</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; hotspot : hotspots) {</div>
<div class="line">    std::cout &lt;&lt; hotspot.function &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> </div>
<div class="line">              &lt;&lt; hotspot.cpu_percent &lt;&lt; <span class="stringliteral">&quot;%\n&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md1923"></a>
Solutions</h3>
<p><b>Excessive Sampling:</b> </p><div class="fragment"><div class="line"><span class="comment">// Reduce sampling rate</span></div>
<div class="line">config.sampling_rate = 0.01;  <span class="comment">// 1% instead of 100%</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Use adaptive sampling</span></div>
<div class="line">adaptive_sampler sampler;</div>
<div class="line">sampler.set_max_throughput(1000);  <span class="comment">// Limit to 1000/sec</span></div>
</div><!-- fragment --><p><b>Lock Contention:</b> </p><div class="fragment"><div class="line"><span class="comment">// Use lock-free structures</span></div>
<div class="line">lock_free_queue&lt;Data&gt; queue;  <span class="comment">// Instead of std::queue with mutex</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Reduce lock scope</span></div>
<div class="line">{</div>
<div class="line">    std::lock_guard&lt;std::mutex&gt; lock(mutex_);</div>
<div class="line">    <span class="comment">// Minimal work under lock</span></div>
<div class="line">    data_ = new_data;</div>
<div class="line">}  <span class="comment">// Lock released immediately</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Use read-write locks</span></div>
<div class="line">std::shared_mutex rw_mutex;</div>
<div class="line"><span class="comment">// Multiple readers</span></div>
<div class="line">std::shared_lock&lt;std::shared_mutex&gt; read_lock(rw_mutex);</div>
<div class="line"><span class="comment">// Single writer</span></div>
<div class="line">std::unique_lock&lt;std::shared_mutex&gt; write_lock(rw_mutex);</div>
</div><!-- fragment --><p><b>Inefficient Algorithms:</b> </p><div class="fragment"><div class="line"><span class="comment">// Use efficient data structures</span></div>
<div class="line">std::unordered_map&lt;Key, Value&gt; map;  <span class="comment">// O(1) instead of O(log n)</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Batch operations</span></div>
<div class="line">std::vector&lt;Data&gt; batch;</div>
<div class="line">batch.reserve(1000);</div>
<div class="line"><span class="comment">// Collect data...</span></div>
<div class="line">process_batch(batch);  <span class="comment">// Process all at once</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1924"></a>
4. Missing Metrics/Traces</h2>
<h3><a class="anchor" id="autotoc_md1925"></a>
Symptoms</h3>
<ul>
<li>No data in dashboards</li>
<li>Incomplete traces</li>
<li>Missing health checks</li>
</ul>
<h3><a class="anchor" id="autotoc_md1926"></a>
Diagnostic Steps</h3>
<div class="fragment"><div class="line"><span class="comment">// Check if collectors are enabled</span></div>
<div class="line"><span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; collector : <a class="code hl_namespace" href="../../de/d3f/namespacemonitoring__system.html">monitoring_system</a>.get_collectors()) {</div>
<div class="line">    std::cout &lt;&lt; collector-&gt;get_name() &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> </div>
<div class="line">              &lt;&lt; (collector-&gt;is_enabled() ? <span class="stringliteral">&quot;enabled&quot;</span> : <span class="stringliteral">&quot;disabled&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Verify data flow</span></div>
<div class="line"><span class="keyword">auto</span> stats = <a class="code hl_namespace" href="../../de/d3f/namespacemonitoring__system.html">monitoring_system</a>.get_pipeline_stats();</div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Collected: &quot;</span> &lt;&lt; stats.metrics_collected &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Exported: &quot;</span> &lt;&lt; stats.metrics_exported &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Dropped: &quot;</span> &lt;&lt; stats.metrics_dropped &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md1927"></a>
Solutions</h3>
<p><b>Sampling Issues:</b> </p><div class="fragment"><div class="line"><span class="comment">// Check sampling configuration</span></div>
<div class="line"><span class="keywordflow">if</span> (config.sampling_rate &lt; 0.01) {</div>
<div class="line">    log_warning(<span class="stringliteral">&quot;Very low sampling rate: {}&quot;</span>, config.sampling_rate);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Temporarily disable sampling for debugging</span></div>
<div class="line">config.sampling_rate = 1.0;  <span class="comment">// 100% sampling</span></div>
</div><!-- fragment --><p><b>Export Failures:</b> </p><div class="fragment"><div class="line"><span class="comment">// Check exporter status</span></div>
<div class="line"><span class="keyword">auto</span> status = exporter.get_status();</div>
<div class="line"><span class="keywordflow">if</span> (status.last_error) {</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Export error: &quot;</span> &lt;&lt; status.last_error.message &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add retry logic</span></div>
<div class="line">retry_policy&lt;bool&gt; retry;</div>
<div class="line">retry.with_max_attempts(3)</div>
<div class="line">     .with_backoff(exponential_backoff{100ms, 2.0});</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> result = retry.execute([&amp;]() {</div>
<div class="line">    <span class="keywordflow">return</span> exporter.export_batch(data);</div>
<div class="line">});</div>
</div><!-- fragment --><p><b>Context Propagation:</b> </p><div class="fragment"><div class="line"><span class="comment">// Ensure context is propagated</span></div>
<div class="line"><span class="keyword">auto</span> span = tracer.start_span(<span class="stringliteral">&quot;operation&quot;</span>);</div>
<div class="line">thread_context::set_current_span(span);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// In child thread</span></div>
<div class="line"><span class="keyword">auto</span> parent_span = thread_context::get_current_span();</div>
<div class="line"><span class="keyword">auto</span> child_span = tracer.start_child_span(parent_span, <span class="stringliteral">&quot;child_op&quot;</span>);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1928"></a>
5. Storage Issues</h2>
<h3><a class="anchor" id="autotoc_md1929"></a>
Symptoms</h3>
<ul>
<li>Failed writes to storage</li>
<li>Slow query performance</li>
<li>Data corruption</li>
</ul>
<h3><a class="anchor" id="autotoc_md1930"></a>
Diagnostic Steps</h3>
<div class="fragment"><div class="line"><span class="comment">// Test storage backend</span></div>
<div class="line">storage_diagnostics diag(storage_backend);</div>
<div class="line"><span class="keyword">auto</span> results = diag.run_tests();</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; test : results) {</div>
<div class="line">    std::cout &lt;&lt; test.name &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> </div>
<div class="line">              &lt;&lt; (test.passed ? <span class="stringliteral">&quot;PASS&quot;</span> : <span class="stringliteral">&quot;FAIL&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    <span class="keywordflow">if</span> (!test.passed) {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;  Error: &quot;</span> &lt;&lt; test.error_message &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Check storage stats</span></div>
<div class="line"><span class="keyword">auto</span> stats = storage_backend.get_stats();</div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Write latency: &quot;</span> &lt;&lt; stats.avg_write_latency_ms &lt;&lt; <span class="stringliteral">&quot; ms\n&quot;</span>;</div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Read latency: &quot;</span> &lt;&lt; stats.avg_read_latency_ms &lt;&lt; <span class="stringliteral">&quot; ms\n&quot;</span>;</div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Failed writes: &quot;</span> &lt;&lt; stats.failed_writes &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md1931"></a>
Solutions</h3>
<p><b>Connection Issues:</b> </p><div class="fragment"><div class="line"><span class="comment">// Add connection pooling</span></div>
<div class="line">connection_pool pool;</div>
<div class="line">pool.set_min_connections(5);</div>
<div class="line">pool.set_max_connections(20);</div>
<div class="line">pool.set_validation_query(<span class="stringliteral">&quot;SELECT 1&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add reconnection logic</span></div>
<div class="line">storage_backend.set_reconnect_policy(</div>
<div class="line">    reconnect_policy{</div>
<div class="line">        .max_attempts = 10,</div>
<div class="line">        .initial_delay = 1s,</div>
<div class="line">        .max_delay = 30s</div>
<div class="line">    }</div>
<div class="line">);</div>
</div><!-- fragment --><p><b>Performance Issues:</b> </p><div class="fragment"><div class="line"><span class="comment">// Enable batching</span></div>
<div class="line">storage_config config;</div>
<div class="line">config.batch_size = 1000;</div>
<div class="line">config.flush_interval = 5s;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add caching</span></div>
<div class="line">cache_config cache_cfg;</div>
<div class="line">cache_cfg.max_size_mb = 100;</div>
<div class="line">cache_cfg.ttl = 60s;</div>
<div class="line">storage_backend.enable_cache(cache_cfg);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Use appropriate indexes</span></div>
<div class="line"><span class="comment">// For SQL backends</span></div>
<div class="line">storage_backend.execute(</div>
<div class="line">    <span class="stringliteral">&quot;CREATE INDEX idx_timestamp ON metrics(timestamp)&quot;</span></div>
<div class="line">);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1932"></a>
6. Network Issues</h2>
<h3><a class="anchor" id="autotoc_md1933"></a>
Symptoms</h3>
<ul>
<li>Connection timeouts</li>
<li>Failed exports</li>
<li>High latency</li>
</ul>
<h3><a class="anchor" id="autotoc_md1934"></a>
Diagnostic Steps</h3>
<div class="fragment"><div class="line"># Test connectivity</div>
<div class="line">ping monitoring-backend.example.com</div>
<div class="line">telnet monitoring-backend.example.com 4317</div>
<div class="line">curl -v https://monitoring-backend.example.com/health</div>
<div class="line"> </div>
<div class="line"># Check DNS</div>
<div class="line">nslookup monitoring-backend.example.com</div>
<div class="line">dig monitoring-backend.example.com</div>
<div class="line"> </div>
<div class="line"># Trace route</div>
<div class="line">traceroute monitoring-backend.example.com</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md1935"></a>
Solutions</h3>
<p><b>Timeout Issues:</b> </p><div class="fragment"><div class="line"><span class="comment">// Increase timeouts</span></div>
<div class="line">network_config config;</div>
<div class="line">config.connect_timeout = 10s;</div>
<div class="line">config.read_timeout = 30s;</div>
<div class="line">config.write_timeout = 30s;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add keep-alive</span></div>
<div class="line">config.keep_alive = <span class="keyword">true</span>;</div>
<div class="line">config.keep_alive_interval = 30s;</div>
</div><!-- fragment --><p><b>SSL/TLS Issues:</b> </p><div class="fragment"><div class="line"><span class="comment">// Configure TLS</span></div>
<div class="line">tls_config config;</div>
<div class="line">config.verify_peer = <span class="keyword">true</span>;</div>
<div class="line">config.ca_cert_path = <span class="stringliteral">&quot;/path/to/ca.crt&quot;</span>;</div>
<div class="line">config.client_cert_path = <span class="stringliteral">&quot;/path/to/client.crt&quot;</span>;</div>
<div class="line">config.client_key_path = <span class="stringliteral">&quot;/path/to/client.key&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Disable verification for testing (NOT for production!)</span></div>
<div class="line">config.verify_peer = <span class="keyword">false</span>;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1936"></a>
7. Circuit Breaker Issues</h2>
<h3><a class="anchor" id="autotoc_md1937"></a>
Symptoms</h3>
<ul>
<li>Circuit breaker always open</li>
<li>Circuit breaker never opens</li>
<li>Unexpected fallback behavior</li>
</ul>
<h3><a class="anchor" id="autotoc_md1938"></a>
Diagnostic Steps</h3>
<div class="fragment"><div class="line"><span class="comment">// Check circuit breaker state</span></div>
<div class="line"><span class="keyword">auto</span> state = <a class="code hl_class" href="../../d0/ddb/classcircuit__breaker.html">circuit_breaker</a>.get_state();</div>
<div class="line"><span class="keyword">auto</span> metrics = <a class="code hl_class" href="../../d0/ddb/classcircuit__breaker.html">circuit_breaker</a>.get_metrics();</div>
<div class="line"> </div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;State: &quot;</span> &lt;&lt; <a class="code hl_function" href="../../df/dfe/test__type_8h.html#aea2c791847a50005ae23b3994b166afb">to_string</a>(state) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Failed calls: &quot;</span> &lt;&lt; metrics.failed_calls &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Success calls: &quot;</span> &lt;&lt; metrics.successful_calls &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Rejected calls: &quot;</span> &lt;&lt; metrics.rejected_calls &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="ttc" id="aclasscircuit__breaker_html"><div class="ttname"><a href="../../d0/ddb/classcircuit__breaker.html">circuit_breaker</a></div><div class="ttdef"><b>Definition</b> <a href="../../d4/dd5/microservices__orchestrator_8cpp_source.html#l00070">microservices_orchestrator.cpp:70</a></div></div>
<div class="ttc" id="atest__type_8h_html_aea2c791847a50005ae23b3994b166afb"><div class="ttname"><a href="../../df/dfe/test__type_8h.html#aea2c791847a50005ae23b3994b166afb">to_string</a></div><div class="ttdeci">constexpr std::string_view to_string(test_priority priority)</div><div class="ttdoc">Converts a test_priority value to its string representation.</div><div class="ttdef"><b>Definition</b> <a href="../../df/dfe/test__type_8h_source.html#l00079">test_type.h:79</a></div></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md1939"></a>
Solutions</h3>
<p><b>Always Open:</b> </p><div class="fragment"><div class="line"><span class="comment">// Adjust thresholds</span></div>
<div class="line">circuit_breaker_config config;</div>
<div class="line">config.failure_threshold = 10;  <span class="comment">// Increase threshold</span></div>
<div class="line">config.failure_ratio = 0.5;     <span class="comment">// 50% failure rate</span></div>
<div class="line">config.reset_timeout = 30s;     <span class="comment">// Shorter reset time</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Manual reset</span></div>
<div class="line"><a class="code hl_class" href="../../d0/ddb/classcircuit__breaker.html">circuit_breaker</a>.reset();</div>
</div><!-- fragment --><p><b>Never Opens:</b> </p><div class="fragment"><div class="line"><span class="comment">// More sensitive configuration</span></div>
<div class="line">config.failure_threshold = 3;   <span class="comment">// Lower threshold</span></div>
<div class="line">config.failure_ratio = 0.3;     <span class="comment">// 30% failure rate</span></div>
<div class="line">config.timeout = 1s;            <span class="comment">// Shorter timeout</span></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md1940"></a>
Debugging Tools</h1>
<h2><a class="anchor" id="autotoc_md1941"></a>
Enable Debug Logging</h2>
<div class="fragment"><div class="line"><span class="comment">// Global debug mode</span></div>
<div class="line">debug_config config;</div>
<div class="line">config.enable_all = <span class="keyword">true</span>;</div>
<div class="line">config.log_level = log_level::trace;</div>
<div class="line">config.include_timestamps = <span class="keyword">true</span>;</div>
<div class="line">config.include_thread_id = <span class="keyword">true</span>;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_namespace" href="../../de/d3f/namespacemonitoring__system.html">monitoring_system</a>.enable_debug(config);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1942"></a>
Memory Debugging</h2>
<div class="fragment"><div class="line"><span class="comment">// Enable memory tracking</span></div>
<div class="line"><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><span class="keyword">class </span>MemoryTracker {</div>
<div class="line">    <span class="keyword">static</span> std::unordered_map&lt;void*, size_t&gt; allocations_;</div>
<div class="line">    </div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">void</span>* allocate(<span class="keywordtype">size_t</span> size) {</div>
<div class="line">        <span class="keywordtype">void</span>* ptr = malloc(size);</div>
<div class="line">        allocations_[ptr] = size;</div>
<div class="line">        <span class="keywordflow">return</span> ptr;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">void</span> deallocate(<span class="keywordtype">void</span>* ptr) {</div>
<div class="line">        allocations_.erase(ptr);</div>
<div class="line">        free(ptr);</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">void</span> report_leaks() {</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; [ptr, size] : allocations_) {</div>
<div class="line">            std::cout &lt;&lt; <span class="stringliteral">&quot;Leak: &quot;</span> &lt;&lt; ptr &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; size &lt;&lt; <span class="stringliteral">&quot; bytes)\n&quot;</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="line"><span class="preprocessor">#endif</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1943"></a>
Performance Debugging</h2>
<div class="fragment"><div class="line"><span class="comment">// Timing macros</span></div>
<div class="line"><span class="preprocessor">#define TIME_BLOCK(name) \</span></div>
<div class="line"><span class="preprocessor">    auto _timer_##name = monitoring_system::scoped_timer(#name);</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Usage</span></div>
<div class="line"><span class="keywordtype">void</span> process_request() {</div>
<div class="line">    TIME_BLOCK(process_request);</div>
<div class="line">    </div>
<div class="line">    {</div>
<div class="line">        TIME_BLOCK(validation);</div>
<div class="line">        validate_input();</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    {</div>
<div class="line">        TIME_BLOCK(processing);</div>
<div class="line">        do_work();</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md1944"></a>
Health Check Verification</h1>
<div class="fragment"><div class="line"><span class="comment">// Comprehensive health check</span></div>
<div class="line"><span class="keyword">class </span>SystemHealthCheck {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keyword">struct </span>HealthReport {</div>
<div class="line">        <span class="keywordtype">bool</span> is_healthy;</div>
<div class="line">        std::vector&lt;std::string&gt; issues;</div>
<div class="line">        std::map&lt;std::string, double&gt; metrics;</div>
<div class="line">    };</div>
<div class="line">    </div>
<div class="line">    HealthReport check_all() {</div>
<div class="line">        HealthReport report;</div>
<div class="line">        report.is_healthy = <span class="keyword">true</span>;</div>
<div class="line">        </div>
<div class="line">        <span class="comment">// Check CPU</span></div>
<div class="line">        <span class="keyword">auto</span> cpu = get_cpu_usage();</div>
<div class="line">        report.metrics[<span class="stringliteral">&quot;cpu_percent&quot;</span>] = cpu;</div>
<div class="line">        <span class="keywordflow">if</span> (cpu &gt; 80.0) {</div>
<div class="line">            report.issues.push_back(<span class="stringliteral">&quot;High CPU usage: &quot;</span> + std::to_string(cpu));</div>
<div class="line">            report.is_healthy = <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line">        </div>
<div class="line">        <span class="comment">// Check memory</span></div>
<div class="line">        <span class="keyword">auto</span> mem = get_memory_usage_mb();</div>
<div class="line">        report.metrics[<span class="stringliteral">&quot;memory_mb&quot;</span>] = mem;</div>
<div class="line">        <span class="keywordflow">if</span> (mem &gt; 1000.0) {</div>
<div class="line">            report.issues.push_back(<span class="stringliteral">&quot;High memory usage: &quot;</span> + std::to_string(mem));</div>
<div class="line">            report.is_healthy = <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line">        </div>
<div class="line">        <span class="comment">// Check queues</span></div>
<div class="line">        <span class="keyword">auto</span> queue_depth = get_queue_depth();</div>
<div class="line">        report.metrics[<span class="stringliteral">&quot;queue_depth&quot;</span>] = queue_depth;</div>
<div class="line">        <span class="keywordflow">if</span> (queue_depth &gt; 5000) {</div>
<div class="line">            report.issues.push_back(<span class="stringliteral">&quot;Queue backlog: &quot;</span> + std::to_string(queue_depth));</div>
<div class="line">            report.is_healthy = <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">return</span> report;</div>
<div class="line">    }</div>
<div class="line">};</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md1945"></a>
Emergency Procedures</h1>
<h2><a class="anchor" id="autotoc_md1946"></a>
System Overload</h2>
<div class="fragment"><div class="line"><span class="comment">// Emergency throttling</span></div>
<div class="line"><span class="keywordtype">void</span> emergency_throttle() {</div>
<div class="line">    <span class="comment">// Reduce sampling to minimum</span></div>
<div class="line">    config.sampling_rate = 0.001;  <span class="comment">// 0.1%</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Increase intervals</span></div>
<div class="line">    config.collection_interval = 60s;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Disable non-critical features</span></div>
<div class="line">    config.enable_tracing = <span class="keyword">false</span>;</div>
<div class="line">    config.enable_profiling = <span class="keyword">false</span>;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Clear queues</span></div>
<div class="line">    metric_queue.clear();</div>
<div class="line">    trace_queue.clear();</div>
<div class="line">    </div>
<div class="line">    log_error(<span class="stringliteral">&quot;Emergency throttling activated&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1947"></a>
Data Recovery</h2>
<div class="fragment"><div class="line"><span class="comment">// Recover from corrupted storage</span></div>
<div class="line"><span class="keywordtype">void</span> recover_storage() {</div>
<div class="line">    <span class="comment">// Backup existing data</span></div>
<div class="line">    storage_backend.backup(<span class="stringliteral">&quot;/tmp/backup&quot;</span>);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Attempt repair</span></div>
<div class="line">    storage_backend.repair();</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Validate data</span></div>
<div class="line">    <span class="keyword">auto</span> validation = storage_backend.validate();</div>
<div class="line">    <span class="keywordflow">if</span> (!validation.is_valid) {</div>
<div class="line">        <span class="comment">// Restore from backup</span></div>
<div class="line">        storage_backend.restore(<span class="stringliteral">&quot;/tmp/backup&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md1948"></a>
Monitoring System Logs</h1>
<h2><a class="anchor" id="autotoc_md1949"></a>
Log Locations</h2>
<div class="fragment"><div class="line"># Default log locations</div>
<div class="line">/var/log/monitoring/system.log     # System logs</div>
<div class="line">/var/log/monitoring/error.log      # Error logs</div>
<div class="line">/var/log/monitoring/metrics.log    # Metric logs</div>
<div class="line">/var/log/monitoring/trace.log      # Trace logs</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1950"></a>
Log Analysis</h2>
<div class="fragment"><div class="line"># Find errors</div>
<div class="line">grep ERROR /var/log/monitoring/system.log</div>
<div class="line"> </div>
<div class="line"># Find warnings</div>
<div class="line">grep WARN /var/log/monitoring/system.log</div>
<div class="line"> </div>
<div class="line"># Find specific component</div>
<div class="line">grep &quot;storage_backend&quot; /var/log/monitoring/system.log</div>
<div class="line"> </div>
<div class="line"># Tail logs</div>
<div class="line">tail -f /var/log/monitoring/system.log</div>
<div class="line"> </div>
<div class="line"># Analyze log patterns</div>
<div class="line">awk &#39;/ERROR/ {print $4}&#39; system.log | sort | uniq -c | sort -rn</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md1951"></a>
Getting Help</h1>
<h2><a class="anchor" id="autotoc_md1952"></a>
Diagnostic Information to Collect</h2>
<p>When reporting issues, include:</p>
<ol type="1">
<li><b>System Information:</b> <div class="fragment"><div class="line">uname -a</div>
<div class="line">cat /etc/os-release</div>
<div class="line">g++ --version</div>
</div><!-- fragment --></li>
<li><b>Configuration:</b> <div class="fragment"><div class="line"><a class="code hl_namespace" href="../../de/d3f/namespacemonitoring__system.html">monitoring_system</a>.dump_config(<span class="stringliteral">&quot;/tmp/config.json&quot;</span>);</div>
</div><!-- fragment --></li>
<li><b>Logs:</b> <div class="fragment"><div class="line">tar -czf logs.tar.gz /var/log/monitoring/</div>
</div><!-- fragment --></li>
<li><b>Stack Trace:</b> <div class="fragment"><div class="line">gdb ./monitoring_app core</div>
<div class="line">(gdb) bt full</div>
</div><!-- fragment --></li>
<li><b>Performance Metrics:</b> <div class="fragment"><div class="line"><span class="keyword">auto</span> report = <a class="code hl_namespace" href="../../de/d3f/namespacemonitoring__system.html">monitoring_system</a>.generate_diagnostic_report();</div>
<div class="line">report.save(<span class="stringliteral">&quot;/tmp/diagnostic_report.json&quot;</span>);</div>
</div><!-- fragment --></li>
</ol>
<h2><a class="anchor" id="autotoc_md1953"></a>
Support Channels</h2>
<ul>
<li>GitHub Issues: [Report bugs and request features]</li>
<li>Documentation: <a class="el" href="../../dd/d6d/md_libraries_2monitoring__system_2docs_2API__REFERENCE.html">API Reference</a></li>
<li>Examples: <a href="../../../examples/">Code examples</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md1954"></a>
Conclusion</h1>
<p>Most issues can be resolved by:</p><ol type="1">
<li>Checking logs for error messages</li>
<li>Verifying configuration</li>
<li>Ensuring sufficient resources</li>
<li>Testing connectivity</li>
<li>Adjusting thresholds and limits</li>
</ol>
<p>For persistent issues, collect diagnostic information and consult the support channels. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
