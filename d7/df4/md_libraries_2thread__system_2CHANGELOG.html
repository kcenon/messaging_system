<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Messaging System: Changelog</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Messaging System<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">High-Performance Cross-Platform Messaging Framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d7/df4/md_libraries_2thread__system_2CHANGELOG.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Changelog</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md780"></a> All notable changes to the Thread System project will be documented in this file.</p>
<p>The format is based on <a href="https://keepachangelog.com/en/1.0.0/">Keep a Changelog</a>, and this project adheres to <a href="https://semver.org/spec/v2.0.0.html">Semantic Versioning</a>.</p>
<h1><a class="anchor" id="autotoc_md781"></a>
[Unreleased] - 2025-07-25</h1>
<h2><a class="anchor" id="autotoc_md782"></a>
Changed</h2>
<ul>
<li><b>Major Modularization</b> üèóÔ∏è<ul>
<li>Moved logger module to separate project (<a href="https://github.com/kcenon/logger">https://github.com/kcenon/logger</a>)</li>
<li>Moved monitoring module to separate project (<a href="https://github.com/kcenon/monitoring">https://github.com/kcenon/monitoring</a>)</li>
<li>Removed ~8,700+ lines of code from core thread system</li>
<li>Core thread system now ~2,700 lines focused purely on threading</li>
<li>Created interface-based architecture for external module integration</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md783"></a>
Removed</h2>
<ul>
<li><b>Logger Module</b> üìù<ul>
<li>All logger implementation files (27 files)</li>
<li>Logger benchmarks and samples</li>
<li>Logger unit tests</li>
<li>Logger is now an optional external dependency</li>
</ul>
</li>
<li><b>Monitoring Module</b> üìä<ul>
<li><a class="el" href="../../d7/db0/classmetrics__collector.html">metrics_collector</a> implementation</li>
<li>monitoring_types and ring_buffer</li>
<li>Monitoring benchmarks and samples</li>
<li>Monitoring unit tests</li>
<li>Monitoring is now an optional external dependency</li>
</ul>
</li>
<li><b>Unused Utilities</b> üîß<ul>
<li>file_handler (I/O utilities)</li>
<li>argument_parser (parsing utilities)</li>
<li>datetime_tool (time utilities)</li>
<li>Old logger interface from utilities</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md784"></a>
Added</h2>
<ul>
<li><b>Interface-Based Design</b> üîå<ul>
<li>logger_interface.h for optional logger integration</li>
<li>monitoring_interface.h for optional monitoring integration</li>
<li>Clean separation between core and auxiliary functionality</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md785"></a>
Documentation</h2>
<ul>
<li><b>Updated All Documentation</b> üìö<ul>
<li>README.md reflects modular architecture</li>
<li>api-reference.md focuses on core APIs</li>
<li>architecture.md describes new modular design</li>
<li>getting-started.md shows usage without external dependencies</li>
<li><a class="el" href="../../d2/d4b/examples_8md.html">examples.md</a> demonstrates both core-only and with-modules usage</li>
<li>performance.md updated with latest benchmarks</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md786"></a>
[2.0.0] - 2025-07-22</h1>
<h2><a class="anchor" id="autotoc_md787"></a>
Added</h2>
<ul>
<li><b>Memory Optimization Improvements</b> üíæ<ul>
<li>Implemented lazy initialization for adaptive_job_queue<ul>
<li>Legacy and MPMC queues now initialized only on first use</li>
<li>Reduces initial memory usage by ~50% when queue remains unused</li>
</ul>
</li>
<li>Optimized node_pool initial allocation<ul>
<li>Reduced initial chunks from 4 to 1</li>
<li>Reduced chunk size from 1024 to 256 nodes</li>
<li>Saves ~93.75% initial memory for node pools</li>
</ul>
</li>
<li>Overall memory footprint significantly reduced while maintaining performance</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md788"></a>
Changed</h2>
<ul>
<li><b>Memory Management</b> üîß<ul>
<li>adaptive_job_queue constructor no longer pre-allocates queues</li>
<li>node_pool now uses more conservative initial allocation strategy</li>
<li>Memory is allocated on-demand rather than upfront</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md789"></a>
[Previous] - 2025-07-09</h1>
<h2><a class="anchor" id="autotoc_md790"></a>
Changed</h2>
<ul>
<li><b>Major Code Cleanup</b> üßπ<ul>
<li>Removed ~2,800 lines of duplicate code across the codebase</li>
<li>Eliminated duplicate job_queue files from internal directories</li>
<li>Removed duplicate typed_job_queue implementations</li>
<li>Removed unused builder pattern (thread_pool_builder, pool_factory)</li>
<li>Removed unused C++20 coroutine implementation (task.h - 867 lines)</li>
<li>Created formatter_macros.h to eliminate formatter duplication</li>
<li>Simplified architecture while maintaining all performance capabilities</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md791"></a>
Added</h2>
<ul>
<li><b>Code Quality Improvements</b> ‚ú®<ul>
<li>Added formatter_macros.h for reducing boilerplate code</li>
<li>Improved code maintainability with cleaner architecture</li>
<li>Updated all documentation to reflect simplified structure</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md792"></a>
Documentation</h2>
<ul>
<li><b>Complete Documentation Update</b> üìö<ul>
<li>Updated README.md to reflect removed components</li>
<li>Rewrote api-reference.md to match current codebase</li>
<li>Updated architecture.md with cleaner structure</li>
<li>Updated getting-started.md examples</li>
<li>Updated performance.md to focus on adaptive queues</li>
<li>All references to removed components cleaned up</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md793"></a>
[Previous Release] - 2025-06-30</h1>
<h2><a class="anchor" id="autotoc_md794"></a>
Fixed</h2>
<ul>
<li><b>Test Stability Improvements</b> üîß<ul>
<li>Fixed segmentation fault in <code>MultipleProducerConsumer</code> test</li>
<li>Improved race condition handling in MPMC queue tests</li>
<li>Added tolerance for cleanup-related race conditions</li>
<li>Reduced test complexity to prevent hazard pointer cleanup issues</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md795"></a>
Added</h2>
<ul>
<li><b>Code Quality Analysis</b> üìä<ul>
<li>Comprehensive unused class analysis identifying 15-20% dead code</li>
<li>Detailed report on experimental features (867-line coroutine system)</li>
<li>Identification of duplicate implementations in internal/external paths</li>
<li>Builder pattern classes marked as potentially unused</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md796"></a>
Changed</h2>
<ul>
<li><b>Build System Reliability</b> ‚ö°<ul>
<li>Improved resource management during parallel compilation</li>
<li>Single-threaded fallback for resource-constrained environments</li>
<li>Enhanced error handling for make jobserver limitations</li>
<li>All 106 tests now pass consistently</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md797"></a>
Removed</h2>
<ul>
<li><b>Lock-Free System Cleanup</b> üßπ<ul>
<li>Removed <code>lockfree_thread_pool</code> and related components</li>
<li>Removed <code>typed_lockfree_thread_pool</code> and related components</li>
<li>Removed <code>lockfree_thread_worker</code> and <code>typed_lockfree_thread_worker</code></li>
<li>Removed lock-free job queue implementations</li>
<li>Removed lock-free logger implementations</li>
<li>Simplified adaptive queue to legacy-only mode</li>
<li>Removed all lock-free samples and benchmarks</li>
<li>Updated documentation to reflect simplified architecture</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md798"></a>
[Previous Release] - 2025-06-29</h1>
<h2><a class="anchor" id="autotoc_md799"></a>
Added</h2>
<ul>
<li><b>Complete Lock-Free Thread Pool System</b> üÜï<ul>
<li><code>lockfree_thread_pool</code> class with 2.14x average performance improvement</li>
<li><code>lockfree_thread_worker</code> with advanced statistics and batch processing</li>
<li><code>lockfree_job_queue</code> with MPMC queue and hazard pointers</li>
<li>Superior scalability under high contention (up to 3.46x better with 16+ producers)</li>
</ul>
</li>
<li><b>Lock-Free Typed Thread Pool System</b> üÜï<ul>
<li><code>typed_lockfree_thread_pool_t&lt;T&gt;</code> template with per-type lock-free queues</li>
<li><code>typed_lockfree_thread_worker_t&lt;T&gt;</code> with priority-aware processing</li>
<li><code>typed_lockfree_job_queue_t&lt;T&gt;</code> with separate queues for each job type</li>
<li>7-71% performance improvement over mutex-based typed pools</li>
</ul>
</li>
<li><b>High-Performance Lock-Free Logger</b> üÜï<ul>
<li><code>lockfree_logger</code> singleton with wait-free enqueue operations</li>
<li><code>lockfree_log_collector</code> using lock-free job queue</li>
<li>Up to 238% better throughput at 16 threads compared to standard logger</li>
<li>Drop-in replacement for standard logger with identical API</li>
</ul>
</li>
<li><b>Advanced Memory Management System</b> üÜï<ul>
<li><code>hazard_pointer</code> implementation for safe lock-free memory reclamation</li>
<li><code>node_pool&lt;T&gt;</code> template for high-performance memory allocation</li>
<li>Prevents ABA problem and memory leaks in lock-free data structures</li>
<li>Cache-line aligned structures for optimal performance</li>
</ul>
</li>
<li><b>Comprehensive Performance Monitoring</b> üÜï<ul>
<li>Detailed statistics APIs for all lock-free components</li>
<li>Per-worker performance metrics (jobs processed, latency, batch operations)</li>
<li>Queue operation statistics (enqueue/dequeue latency, retry counts)</li>
<li>Real-time monitoring through <a class="el" href="../../d7/db0/classmetrics__collector.html">metrics_collector</a></li>
</ul>
</li>
<li><b>Enhanced Documentation</b><ul>
<li>Complete API reference documentation for all lock-free implementations</li>
<li>Performance comparison tables and benchmarking data</li>
<li>Usage examples and best practices for each component</li>
<li>Detailed architecture documentation for lock-free algorithms</li>
<li>Enhanced README.md with comprehensive project overview and benefits</li>
</ul>
</li>
<li><b>Batch Processing Support</b><ul>
<li>Batch job submission for improved throughput</li>
<li>Configurable batch sizes for workers</li>
<li>Batch dequeue operations for lock-free queues</li>
</ul>
</li>
<li><b>Advanced Configuration Options</b><ul>
<li>Backoff strategies for contention handling in lock-free operations</li>
<li>Hazard pointer configuration for memory management</li>
<li>Runtime statistics collection and reset functionality</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md800"></a>
Changed</h2>
<ul>
<li><b>BREAKING</b>: Renamed <code>priority_thread_pool</code> to <code>typed_thread_pool</code> to better reflect the job type-based scheduling paradigm</li>
<li><b>BREAKING</b>: Changed <code>job_priorities</code> enum to <code>job_types</code> with values: RealTime, Batch, Background</li>
<li>All <code>priority_*</code> classes renamed to <code>typed_*</code> for consistency</li>
<li><b>Enhanced Performance Characteristics</b>:<ul>
<li>Lock-free thread pool: <b>2.14x average performance improvement</b></li>
<li>Lock-free typed thread pool: <b>7-71% performance improvement</b> under load</li>
<li>Lock-free logger: <b>Up to 238% better throughput</b> at high concurrency</li>
<li>Lock-free queue operations: <b>7.7x faster enqueue</b>, <b>5.4x faster dequeue</b> under contention</li>
</ul>
</li>
<li><b>Improved API Design</b>:<ul>
<li>All lock-free implementations are drop-in replacements for standard versions</li>
<li>Enhanced error handling with detailed error messages</li>
<li>Comprehensive statistics APIs for performance monitoring</li>
<li>Template-based design for maximum flexibility</li>
</ul>
</li>
<li><b>Memory Management Enhancements</b>:<ul>
<li>Hazard pointer implementation prevents memory leaks in lock-free structures</li>
<li>Node pooling reduces allocation overhead</li>
<li>Cache-line alignment prevents false sharing</li>
</ul>
</li>
<li><b>Updated Documentation</b>:<ul>
<li>Complete API reference for all lock-free implementations</li>
<li>Performance benchmarking data and comparison tables</li>
<li>Updated samples with lock-free examples</li>
<li>Enhanced architecture documentation</li>
</ul>
</li>
<li><b>MPMC Queue Improvements</b>:<ul>
<li>Completely removed thread-local storage for improved stability</li>
<li>Added retry limits (MAX_TOTAL_RETRIES = 1000) to prevent infinite loops</li>
<li>All stress tests now enabled and passing reliably</li>
<li>Hazard pointer integration for safe memory reclamation</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md801"></a>
Fixed</h2>
<ul>
<li>Thread safety improvements in typed job queue</li>
<li>Memory leak fixes in worker thread destruction</li>
<li>Platform-specific compilation issues</li>
<li>MPMC queue infinite loop issues under high contention</li>
<li>Thread-local storage cleanup segmentation faults</li>
<li>All disabled tests now enabled and passing</li>
</ul>
<h1><a class="anchor" id="autotoc_md802"></a>
[1.0.0] - 2024-01-15</h1>
<h2><a class="anchor" id="autotoc_md803"></a>
Added</h2>
<ul>
<li>Initial release of Thread System framework</li>
<li>Core thread_base class with C++20 std::jthread support</li>
<li>Priority-based thread pool system</li>
<li>Asynchronous logging framework with multiple output targets</li>
<li>Comprehensive sample applications</li>
<li>Cross-platform build system with vcpkg integration</li>
<li>Extensive unit test suite with Google Test</li>
</ul>
<h2><a class="anchor" id="autotoc_md804"></a>
Core Components</h2>
<ul>
<li><b>Thread Base Module</b>: Foundation for all threading operations</li>
<li><b>Logging System</b>: High-performance asynchronous logging</li>
<li><b>Thread Pool System</b>: Efficient worker thread management</li>
<li><b>Priority Thread Pool System</b>: Advanced priority-based scheduling (renamed to Typed Thread Pool in later versions)</li>
</ul>
<h2><a class="anchor" id="autotoc_md805"></a>
Supported Platforms</h2>
<ul>
<li>Windows (MSVC 2019+, MinGW, MSYS2)</li>
<li>Linux (GCC 9+, Clang 10+)</li>
<li>macOS (Clang 10+)</li>
</ul>
<h2><a class="anchor" id="autotoc_md806"></a>
Performance Characteristics</h2>
<h3><a class="anchor" id="autotoc_md807"></a>
Latest Performance Metrics (Apple M1, 8-core @ 3.2GHz, 16GB, macOS Sonoma)</h3>
<p><b>Core Performance Improvements:</b></p><ul>
<li><b>Peak Throughput</b>: Up to 15.2M jobs/second (lock-free, 1 worker, empty jobs)</li>
<li><b>Real-world Throughput</b>:<ul>
<li>Standard thread pool: 1.16M jobs/s (10 workers)</li>
<li><b>Lock-free thread pool</b>: 2.48M jobs/s (8 workers) - <b>2.14x improvement</b></li>
<li>Typed thread pool (mutex): 1.24M jobs/s (6 workers, 3 types)</li>
<li><b>Typed lock-free thread pool</b>: 2.38M jobs/s (100 jobs), <b>+7.2%</b> vs mutex</li>
</ul>
</li>
</ul>
<p><b>Lock-Free Queue Performance:</b></p><ul>
<li><b>Enqueue operations</b>: <b>7.7x faster</b> under high contention</li>
<li><b>Dequeue operations</b>: <b>5.4x faster</b> under high contention</li>
<li><b>Scalability</b>: <b>2-4x better scaling</b> under contention</li>
<li><b>Memory efficiency</b>: ~1.5MB (with hazard pointers) vs &lt;1MB (standard)</li>
</ul>
<p>**Logger Performance:**</p><ul>
<li>**Single thread**: Standard logger 4.34M/s, Lock-free logger 3.90M/s</li>
<li>**Multi-thread (16 threads)**: Lock-free logger **+238% better** (0.54M/s vs 0.16M/s)</li>
<li>**Latency**: Standard logger 148ns, **15.7x lower** than industry alternatives</li>
</ul>
<p>**Memory Management:**</p><ul>
<li>Thread creation overhead: ~24.5 microseconds (measured on Apple M1)</li>
<li>Job scheduling latency: ~77 nanoseconds (standard), ~320ns (lock-free enqueue)</li>
<li>Lock-free operations maintain **consistent performance** regardless of contention</li>
<li>Hazard pointer overhead: &lt;5% for memory safety guarantees</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md809"></a>
Contributing</h1>
<p>Please read <a class="el" href="../../d1/df7/monitoring__system_2CONTRIBUTING_8md.html">CONTRIBUTING.md</a> for details on our code of conduct and the process for submitting pull requests.</p>
<h1><a class="anchor" id="autotoc_md810"></a>
License</h1>
<p>This project is licensed under the BSD 3-Clause License - see the [LICENSE](LICENSE) file for details. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
