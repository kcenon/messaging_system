# Messaging System 아키텍처

**버전**: 0.1.0
**최종 수정일**: 2025-11-30
**언어**: [English](ARCHITECTURE.md) | [한국어]

---

## 개요

이 문서는 messaging_system의 아키텍처 설계, 컴포넌트 구조 및 데이터 흐름에 대해 설명합니다.

---

## 목차

1. [시스템 개요](#시스템-개요)
2. [컴포넌트 아키텍처](#컴포넌트-아키텍처)
3. [의존성 구조](#의존성-구조)
4. [데이터 흐름](#데이터-흐름)
5. [설계 원칙](#설계-원칙)

---

## 시스템 개요

messaging_system은 프로덕션급 메시징 인프라를 제공하는 라이브러리입니다:

```
┌─────────────────────────────────────────────┐
│           messaging_system                   │
│                                             │
│  ┌─────────────┐  ┌─────────────────────┐  │
│  │ Message Bus │──│ Topic Router        │  │
│  └──────┬──────┘  └─────────────────────┘  │
│         │                                   │
│  ┌──────▼──────┐  ┌─────────────────────┐  │
│  │ Pub/Sub     │  │ Request/Reply       │  │
│  └─────────────┘  └─────────────────────┘  │
│         │                                   │
│  ┌──────▼──────┐  ┌─────────────────────┐  │
│  │ Event Stream│  │ Message Pipeline    │  │
│  └─────────────┘  └─────────────────────┘  │
└──────────────────────┬──────────────────────┘
                       │
        ┌──────────────┼──────────────┐
        │              │              │
  ┌─────▼─────┐ ┌──────▼─────┐ ┌─────▼─────┐
  │ thread_   │ │ container_ │ │ network_  │
  │ system    │ │ system     │ │ system    │
  └───────────┘ └────────────┘ └───────────┘
```

---

## 컴포넌트 아키텍처

### 핵심 컴포넌트

| 컴포넌트 | 역할 | 주요 기능 |
|----------|------|----------|
| **Message Bus** | 중앙 코디네이터 | pub/sub, 메시지 라우팅 |
| **Topic Router** | 토픽 매칭 | 와일드카드, 패턴 매칭 |
| **Message Queue** | 메시지 버퍼링 | 우선순위 큐, 스레드 안전 |
| **Serializer** | 직렬화 | container_system 기반 |

### 메시징 패턴

| 패턴 | 용도 | 특징 |
|------|------|------|
| **Pub/Sub** | 이벤트 브로드캐스트 | 1:N 통신 |
| **Request/Reply** | 동기 호출 | 요청-응답 |
| **Event Stream** | 이벤트 소싱 | 재생 지원 |
| **Pipeline** | 변환 체인 | 파이프-필터 |

---

## 의존성 구조

### 버전 매트릭스

| 컴포넌트 | 버전 | 역할 |
|----------|------|------|
| common_system | v1.0.0 | Result<T>, 인터페이스 |
| thread_system | v1.0.0 | 스레드 풀, 실행자 |
| container_system | v1.0.0 | 직렬화 |
| logger_system | v1.0.0 | 로깅 |
| monitoring_system | v2.0.0 | 메트릭 |
| network_system | v1.0.0 | 네트워크 전송 |

---

## 데이터 흐름

### 메시지 발행 흐름

```
Publisher
    │
    ▼
┌───────────────┐
│  Message Bus  │
└───────┬───────┘
        │
        ▼
┌───────────────┐
│ Topic Router  │
└───────┬───────┘
        │
        ▼
┌───────────────┐
│  Subscribers  │
└───────────────┘
```

### Request/Reply 흐름

```
Client                     Server
   │                          │
   │──── Request ────────────►│
   │                          │
   │◄─── Response ────────────│
   │                          │
```

---

## 설계 원칙

### 1. 느슨한 결합

퍼블리셔와 구독자가 서로를 알 필요 없음

### 2. 비동기 우선

기본적으로 비동기 메시징, 필요시 동기 패턴

### 3. 스레드 안전

모든 핵심 컴포넌트는 스레드 안전

### 4. 확장성

플러그인 가능한 백엔드와 직렬화

---

## 관련 문서

- [API 레퍼런스](API_REFERENCE_KO.md)
- [기능](FEATURES_KO.md)
- [벤치마크](BENCHMARKS_KO.md)
