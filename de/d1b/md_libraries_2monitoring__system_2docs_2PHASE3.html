<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Messaging System: Phase 3: Real-time Alerting System and Web Dashboard</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Messaging System<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">High-Performance Cross-Platform Messaging Framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('de/d1b/md_libraries_2monitoring__system_2docs_2PHASE3.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Phase 3: Real-time Alerting System and Web Dashboard</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md1794"></a> </p>
<h1><a class="anchor" id="autotoc_md1795"></a>
Overview</h1>
<p>Phase 3 transforms the <a class="el" href="../../de/d3f/namespacemonitoring__system.html">monitoring_system</a> into a complete observability platform by adding real-time alerting capabilities and a web-based dashboard for visualization. This phase implements a sophisticated rule-based alert engine, multi-channel notification system, and responsive web interface with WebSocket streaming.</p>
<h1><a class="anchor" id="autotoc_md1796"></a>
Architecture</h1>
<h2><a class="anchor" id="autotoc_md1797"></a>
Component Overview</h2>
<div class="fragment"><div class="line">┌────────────────────────────────────────────┐</div>
<div class="line">│            Web Dashboard                   │</div>
<div class="line">│  - Real-time visualization                 │</div>
<div class="line">│  - Interactive controls                    │</div>
<div class="line">│  - Mobile responsive UI                    │</div>
<div class="line">└────────────────────────────────────────────┘</div>
<div class="line">                    │</div>
<div class="line">         HTTP/WebSocket Protocol</div>
<div class="line">                    │</div>
<div class="line">┌────────────────────────────────────────────┐</div>
<div class="line">│         Dashboard Server                   │</div>
<div class="line">│  - HTTP request handling                   │</div>
<div class="line">│  - WebSocket management                    │</div>
<div class="line">│  - Authentication &amp; CORS                   │</div>
<div class="line">└────────────────────────────────────────────┘</div>
<div class="line">                    │</div>
<div class="line">┌────────────────────────────────────────────┐</div>
<div class="line">│           Metric API                       │</div>
<div class="line">│  - RESTful endpoints                       │</div>
<div class="line">│  - Query processing                        │</div>
<div class="line">│  - Data transformation                     │</div>
<div class="line">└────────────────────────────────────────────┘</div>
<div class="line">                    │</div>
<div class="line">┌────────────────────────────────────────────┐</div>
<div class="line">│         Alerting System                    │</div>
<div class="line">│  ┌──────────────┐  ┌──────────────┐      │</div>
<div class="line">│  │Rule Engine   │  │Notification  │      │</div>
<div class="line">│  │              │  │Manager       │      │</div>
<div class="line">│  └──────────────┘  └──────────────┘      │</div>
<div class="line">│  ┌──────────────────────────────┐        │</div>
<div class="line">│  │Alert Deduplication System     │        │</div>
<div class="line">│  └──────────────────────────────┘        │</div>
<div class="line">└────────────────────────────────────────────┘</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md1798"></a>
Components</h1>
<h2><a class="anchor" id="autotoc_md1799"></a>
1. Rule Engine (&lt;tt&gt;alerting/rule_engine.h&lt;/tt&gt;)</h2>
<p>The rule engine evaluates metrics against defined rules and triggers alerts when conditions are met.</p>
<h3><a class="anchor" id="autotoc_md1800"></a>
Features</h3>
<ul>
<li>Dynamic rule management (CRUD operations)</li>
<li>Complex condition evaluation (AND/OR/NOT)</li>
<li>Metric aggregation functions</li>
<li>Background evaluation thread</li>
<li>Expression evaluator for complex thresholds</li>
</ul>
<h3><a class="anchor" id="autotoc_md1801"></a>
Rule Structure</h3>
<div class="fragment"><div class="line"><span class="keyword">struct </span>AlertRule {</div>
<div class="line">    std::string id;</div>
<div class="line">    std::string name;</div>
<div class="line">    AlertSeverity severity;</div>
<div class="line">    std::variant&lt;RuleCondition, CompositeCondition&gt; condition;</div>
<div class="line">    std::chrono::seconds evaluation_interval;</div>
<div class="line">    std::chrono::seconds cooldown_period;</div>
<div class="line">    std::unordered_map&lt;std::string, std::string&gt; labels;</div>
<div class="line">};</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md1802"></a>
Example Usage</h3>
<div class="fragment"><div class="line"><span class="comment">// Create a CPU usage alert rule</span></div>
<div class="line"><span class="keyword">auto</span> rule = RuleBuilder(<span class="stringliteral">&quot;cpu_high&quot;</span>)</div>
<div class="line">    .with_name(<span class="stringliteral">&quot;High CPU Usage&quot;</span>)</div>
<div class="line">    .with_severity(AlertSeverity::CRITICAL)</div>
<div class="line">    .with_condition({</div>
<div class="line">        .metric_name = <span class="stringliteral">&quot;cpu_usage&quot;</span>,</div>
<div class="line">        .op = ConditionOperator::GREATER_THAN,</div>
<div class="line">        .threshold = 90.0,</div>
<div class="line">        .aggregation = AggregationFunction::AVG,</div>
<div class="line">        .window = std::chrono::minutes(5)</div>
<div class="line">    })</div>
<div class="line">    .with_cooldown_period(std::chrono::minutes(10))</div>
<div class="line">    .build();</div>
<div class="line"> </div>
<div class="line">engine.add_rule(rule);</div>
<div class="line">engine.start_background_evaluation();</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1803"></a>
2. Notification Manager (&lt;tt&gt;alerting/notification_manager.h&lt;/tt&gt;)</h2>
<p>Manages alert notifications across multiple channels with retry logic and templating.</p>
<h3><a class="anchor" id="autotoc_md1804"></a>
Supported Channels</h3>
<ul>
<li><b>Email</b>: SMTP-based email notifications</li>
<li><b>Slack</b>: Webhook integration</li>
<li><b>SMS</b>: Via Twilio, Nexmo, etc.</li>
<li><b>Webhook</b>: Generic HTTP callbacks</li>
<li><b>PagerDuty</b>: Incident management</li>
<li><b>OpsGenie</b>: Alert management</li>
</ul>
<h3><a class="anchor" id="autotoc_md1805"></a>
Features</h3>
<ul>
<li>Template-based message rendering</li>
<li>Priority queue processing</li>
<li>Retry mechanism with exponential backoff</li>
<li>Rate limiting per channel</li>
<li>Notification history tracking</li>
</ul>
<h3><a class="anchor" id="autotoc_md1806"></a>
Example Configuration</h3>
<div class="fragment"><div class="line"><span class="comment">// Configure Slack notifications</span></div>
<div class="line"><span class="keyword">auto</span> slack_config = std::make_shared&lt;SlackConfig&gt;();</div>
<div class="line">slack_config-&gt;webhook_url = <span class="stringliteral">&quot;https://hooks.slack.com/services/...&quot;</span>;</div>
<div class="line">slack_config-&gt;channel = <span class="stringliteral">&quot;#alerts&quot;</span>;</div>
<div class="line">slack_config-&gt;username = <span class="stringliteral">&quot;Monitoring Bot&quot;</span>;</div>
<div class="line">notifier.add_channel_config(<span class="stringliteral">&quot;slack_primary&quot;</span>, slack_config);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Configure email notifications</span></div>
<div class="line"><span class="keyword">auto</span> email_config = std::make_shared&lt;EmailConfig&gt;();</div>
<div class="line">email_config-&gt;smtp_server = <span class="stringliteral">&quot;smtp.company.com&quot;</span>;</div>
<div class="line">email_config-&gt;smtp_port = 587;</div>
<div class="line">email_config-&gt;use_tls = <span class="keyword">true</span>;</div>
<div class="line">email_config-&gt;from_address = <span class="stringliteral">&quot;monitoring@company.com&quot;</span>;</div>
<div class="line">email_config-&gt;to_addresses = {<span class="stringliteral">&quot;oncall@company.com&quot;</span>, <span class="stringliteral">&quot;ops@company.com&quot;</span>};</div>
<div class="line">notifier.add_channel_config(<span class="stringliteral">&quot;email_oncall&quot;</span>, email_config);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1807"></a>
3. Alert Deduplication (&lt;tt&gt;alerting/alert_deduplication.h&lt;/tt&gt;)</h2>
<p>Intelligent system to reduce alert fatigue through deduplication and grouping.</p>
<h3><a class="anchor" id="autotoc_md1808"></a>
Deduplication Strategies</h3>
<ul>
<li><b>Exact Match</b>: Identical alert content</li>
<li><b>Fuzzy Match</b>: Similarity-based using Levenshtein distance</li>
<li><b>Time-based</b>: Within configurable time windows</li>
<li><b>Fingerprint</b>: Content-based hashing</li>
</ul>
<h3><a class="anchor" id="autotoc_md1809"></a>
Grouping Strategies</h3>
<ul>
<li><b>BY_RULE</b>: Group by rule ID</li>
<li><b>BY_SEVERITY</b>: Group by severity level</li>
<li><b>BY_LABELS</b>: Group by label combinations</li>
<li><b>BY_TIME_WINDOW</b>: Group within time windows</li>
<li><b>BY_CUSTOM</b>: Custom grouping function</li>
</ul>
<h3><a class="anchor" id="autotoc_md1810"></a>
Silence Management</h3>
<div class="fragment"><div class="line">SilenceConfig silence;</div>
<div class="line">silence.name = <span class="stringliteral">&quot;Maintenance Window&quot;</span>;</div>
<div class="line">silence.start_time = std::chrono::system_clock::now();</div>
<div class="line">silence.end_time = std::chrono::system_clock::now() + std::chrono::hours(2);</div>
<div class="line">silence.matchers = {{<span class="stringliteral">&quot;service&quot;</span>, <span class="stringliteral">&quot;database&quot;</span>}, {<span class="stringliteral">&quot;environment&quot;</span>, <span class="stringliteral">&quot;staging&quot;</span>}};</div>
<div class="line">silence_manager.add_silence(silence);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1811"></a>
4. Dashboard Server (&lt;tt&gt;web/dashboard_server.h&lt;/tt&gt;)</h2>
<p>HTTP/WebSocket server for the web dashboard with comprehensive request handling.</p>
<h3><a class="anchor" id="autotoc_md1812"></a>
Features</h3>
<ul>
<li>HTTP request routing</li>
<li>WebSocket bidirectional communication</li>
<li>Session-based authentication</li>
<li>Rate limiting</li>
<li>CORS support</li>
<li>Static file serving</li>
<li>Multi-threaded worker pool</li>
</ul>
<h3><a class="anchor" id="autotoc_md1813"></a>
Server Configuration</h3>
<div class="fragment"><div class="line">DashboardServer server(8080);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Configure CORS</span></div>
<div class="line">CorsConfig cors;</div>
<div class="line">cors.allowed_origins = {<span class="stringliteral">&quot;http://localhost:3000&quot;</span>, <span class="stringliteral">&quot;https://app.company.com&quot;</span>};</div>
<div class="line">cors.allowed_methods = {<span class="stringliteral">&quot;GET&quot;</span>, <span class="stringliteral">&quot;POST&quot;</span>, <span class="stringliteral">&quot;PUT&quot;</span>, <span class="stringliteral">&quot;DELETE&quot;</span>, <span class="stringliteral">&quot;OPTIONS&quot;</span>};</div>
<div class="line">cors.allowed_headers = {<span class="stringliteral">&quot;Content-Type&quot;</span>, <span class="stringliteral">&quot;Authorization&quot;</span>};</div>
<div class="line"><a class="code hl_enumvalue" href="../../de/d3f/namespacemonitoring__system.html#a85c35f5354bb46fdd8f4e39a0aa37c9eacf1e8c14e54505f60aa10ceb8d5d8ab3">server</a>.set_cors_config(cors);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Configure authentication</span></div>
<div class="line">AuthConfig auth;</div>
<div class="line">auth.type = AuthConfig::BEARER;</div>
<div class="line">auth.validate_token = [](<span class="keyword">const</span> std::string&amp; token) {</div>
<div class="line">    <span class="keywordflow">return</span> jwt_validator.validate(token);</div>
<div class="line">};</div>
<div class="line"><a class="code hl_enumvalue" href="../../de/d3f/namespacemonitoring__system.html#a85c35f5354bb46fdd8f4e39a0aa37c9eacf1e8c14e54505f60aa10ceb8d5d8ab3">server</a>.set_auth_config(auth);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Configure rate limiting</span></div>
<div class="line">RateLimitConfig rate_limit;</div>
<div class="line">rate_limit.requests_per_minute = 100;</div>
<div class="line">rate_limit.burst_size = 200;</div>
<div class="line"><a class="code hl_enumvalue" href="../../de/d3f/namespacemonitoring__system.html#a85c35f5354bb46fdd8f4e39a0aa37c9eacf1e8c14e54505f60aa10ceb8d5d8ab3">server</a>.set_rate_limit_config(rate_limit);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_enumvalue" href="../../de/d3f/namespacemonitoring__system.html#a85c35f5354bb46fdd8f4e39a0aa37c9eacf1e8c14e54505f60aa10ceb8d5d8ab3">server</a>.start();</div>
<div class="ttc" id="anamespacemonitoring__system_html_a85c35f5354bb46fdd8f4e39a0aa37c9eacf1e8c14e54505f60aa10ceb8d5d8ab3"><div class="ttname"><a href="../../de/d3f/namespacemonitoring__system.html#a85c35f5354bb46fdd8f4e39a0aa37c9eacf1e8c14e54505f60aa10ceb8d5d8ab3">monitoring_system::otel_span_kind::server</a></div><div class="ttdeci">@ server</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1814"></a>
5. Metric API (&lt;tt&gt;web/metric_api.h&lt;/tt&gt;)</h2>
<p>RESTful API for metric queries and dashboard operations.</p>
<h3><a class="anchor" id="autotoc_md1815"></a>
Endpoints</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Endpoint   </th><th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/v1/metrics</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">List all metrics    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/v1/metrics/{name}</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Get specific metric    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/v1/query</code>   </td><td class="markdownTableBodyNone">POST   </td><td class="markdownTableBodyNone">Execute metric query    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/v1/alerts</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">List active alerts    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/v1/alerts/{id}/ack</code>   </td><td class="markdownTableBodyNone">POST   </td><td class="markdownTableBodyNone">Acknowledge alert    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/v1/dashboards</code>   </td><td class="markdownTableBodyNone">GET/POST   </td><td class="markdownTableBodyNone">Dashboard CRUD    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/v1/health</code>   </td><td class="markdownTableBodyNone">GET   </td><td class="markdownTableBodyNone">Health check    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/ws/metrics</code>   </td><td class="markdownTableBodyNone">WS   </td><td class="markdownTableBodyNone">Real-time metric stream   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1816"></a>
Query Builder</h3>
<div class="fragment"><div class="line"><span class="keyword">auto</span> query = MetricQueryBuilder()</div>
<div class="line">    .metric(<span class="stringliteral">&quot;cpu_usage&quot;</span>)</div>
<div class="line">    .from(std::chrono::system_clock::now() - std::chrono::hours(24))</div>
<div class="line">    .to(std::chrono::system_clock::now())</div>
<div class="line">    .interval(std::chrono::minutes(5))</div>
<div class="line">    .label(<span class="stringliteral">&quot;host&quot;</span>, <span class="stringliteral">&quot;server-01&quot;</span>)</div>
<div class="line">    .aggregate(<span class="stringliteral">&quot;avg&quot;</span>)</div>
<div class="line">    .build();</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> results = api.query_metrics(query);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1817"></a>
6. Web Dashboard (&lt;tt&gt;web/static/dashboard.html&lt;/tt&gt;)</h2>
<p>Responsive web interface for real-time monitoring.</p>
<h3><a class="anchor" id="autotoc_md1818"></a>
Features</h3>
<ul>
<li><b>Real-time Charts</b>: Chart.js-based visualizations</li>
<li><b>WebSocket Updates</b>: Live metric streaming</li>
<li><b>Responsive Design</b>: Mobile-first approach</li>
<li><b>Interactive Filters</b>: Time range, metric type, refresh interval</li>
<li><b>Alert Panel</b>: Active alerts with severity indicators</li>
<li><b>System Overview</b>: Key metrics at a glance</li>
</ul>
<h3><a class="anchor" id="autotoc_md1819"></a>
Technologies</h3>
<ul>
<li>HTML5/CSS3 with responsive grid layout</li>
<li>JavaScript ES6+ for interactivity</li>
<li>Chart.js for data visualization</li>
<li>WebSocket API for real-time updates</li>
</ul>
<h1><a class="anchor" id="autotoc_md1820"></a>
Configuration Examples</h1>
<h2><a class="anchor" id="autotoc_md1821"></a>
Complete Setup Example</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;monitoring/alerting/rule_engine.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;monitoring/alerting/notification_manager.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;monitoring/alerting/alert_deduplication.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;monitoring/web/dashboard_server.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;monitoring/web/metric_api.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="../../de/d3f/namespacemonitoring__system.html">monitoring_system</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="../../db/d5d/basic__usage__example_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a>() {</div>
<div class="line">    <span class="comment">// 1. Initialize alert deduplication</span></div>
<div class="line">    <a class="code hl_class" href="../../d5/dc0/classmonitoring__system_1_1alerting_1_1AlertDeduplicationSystem.html">alerting::AlertDeduplicationSystem</a> dedup_system;</div>
<div class="line">    dedup_system.<a class="code hl_function" href="../../d5/dc0/classmonitoring__system_1_1alerting_1_1AlertDeduplicationSystem.html#a22ddc0997286b75e0fa58966674b59c3">get_deduplication</a>().<a class="code hl_function" href="../../d2/da4/classmonitoring__system_1_1alerting_1_1AlertDeduplication.html#a9ed042c1c820fa6c8a5c866df8332588">set_deduplication_strategy</a>(</div>
<div class="line">        alerting::DeduplicationStrategy::FUZZY_MATCH);</div>
<div class="line">    dedup_system.<a class="code hl_function" href="../../d5/dc0/classmonitoring__system_1_1alerting_1_1AlertDeduplicationSystem.html#a22ddc0997286b75e0fa58966674b59c3">get_deduplication</a>().<a class="code hl_function" href="../../d2/da4/classmonitoring__system_1_1alerting_1_1AlertDeduplication.html#a67df3a62ffa12bfc28dba3d70e359298">set_similarity_threshold</a>(0.85);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 2. Set up rule engine</span></div>
<div class="line">    <a class="code hl_class" href="../../d6/d7d/classmonitoring__system_1_1alerting_1_1RuleEngine.html">alerting::RuleEngine</a> rule_engine;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// CPU usage rule</span></div>
<div class="line">    <span class="keyword">auto</span> cpu_rule = <a class="code hl_class" href="../../d5/d85/classmonitoring__system_1_1alerting_1_1RuleBuilder.html">alerting::RuleBuilder</a>(<span class="stringliteral">&quot;cpu_critical&quot;</span>)</div>
<div class="line">        .<a class="code hl_function" href="../../d5/d85/classmonitoring__system_1_1alerting_1_1RuleBuilder.html#ab892905220e5aebc8ecd6811ab283498">with_name</a>(<span class="stringliteral">&quot;Critical CPU Usage&quot;</span>)</div>
<div class="line">        .<a class="code hl_function" href="../../d5/d85/classmonitoring__system_1_1alerting_1_1RuleBuilder.html#a25894fe7108d6ac59e765556c561098d">with_severity</a>(alerting::AlertSeverity::CRITICAL)</div>
<div class="line">        .<a class="code hl_function" href="../../d5/d85/classmonitoring__system_1_1alerting_1_1RuleBuilder.html#aec4c063dfdd895143201fd431d7b683e">with_condition</a>({</div>
<div class="line">            .metric_name = <span class="stringliteral">&quot;system.cpu.usage&quot;</span>,</div>
<div class="line">            .op = alerting::ConditionOperator::GREATER_THAN,</div>
<div class="line">            .threshold = 95.0,</div>
<div class="line">            .aggregation = alerting::AggregationFunction::AVG,</div>
<div class="line">            .window = std::chrono::minutes(5)</div>
<div class="line">        })</div>
<div class="line">        .with_cooldown_period(std::chrono::minutes(15))</div>
<div class="line">        .add_label(<span class="stringliteral">&quot;team&quot;</span>, <span class="stringliteral">&quot;infrastructure&quot;</span>)</div>
<div class="line">        .<a class="code hl_function" href="../../d5/d85/classmonitoring__system_1_1alerting_1_1RuleBuilder.html#ae31842c889a76de3d84f1897ea6608d0">add_annotation</a>(<span class="stringliteral">&quot;runbook&quot;</span>, <span class="stringliteral">&quot;https://wiki/runbooks/high-cpu&quot;</span>)</div>
<div class="line">        .<a class="code hl_function" href="../../d5/d85/classmonitoring__system_1_1alerting_1_1RuleBuilder.html#a0c5c87264c4e552f38e930e53b75113c">build</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Memory usage rule</span></div>
<div class="line">    <span class="keyword">auto</span> memory_rule = <a class="code hl_class" href="../../d5/d85/classmonitoring__system_1_1alerting_1_1RuleBuilder.html">alerting::RuleBuilder</a>(<span class="stringliteral">&quot;memory_high&quot;</span>)</div>
<div class="line">        .<a class="code hl_function" href="../../d5/d85/classmonitoring__system_1_1alerting_1_1RuleBuilder.html#ab892905220e5aebc8ecd6811ab283498">with_name</a>(<span class="stringliteral">&quot;High Memory Usage&quot;</span>)</div>
<div class="line">        .<a class="code hl_function" href="../../d5/d85/classmonitoring__system_1_1alerting_1_1RuleBuilder.html#a25894fe7108d6ac59e765556c561098d">with_severity</a>(alerting::AlertSeverity::WARNING)</div>
<div class="line">        .<a class="code hl_function" href="../../d5/d85/classmonitoring__system_1_1alerting_1_1RuleBuilder.html#aec4c063dfdd895143201fd431d7b683e">with_condition</a>({</div>
<div class="line">            .metric_name = <span class="stringliteral">&quot;system.memory.usage&quot;</span>,</div>
<div class="line">            .op = alerting::ConditionOperator::GREATER_THAN,</div>
<div class="line">            .threshold = 85.0</div>
<div class="line">        })</div>
<div class="line">        .with_evaluation_interval(std::chrono::seconds(30))</div>
<div class="line">        .<a class="code hl_function" href="../../d5/d85/classmonitoring__system_1_1alerting_1_1RuleBuilder.html#a0c5c87264c4e552f38e930e53b75113c">build</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Disk space rule with composite condition</span></div>
<div class="line">    <a class="code hl_struct" href="../../d8/d4a/structmonitoring__system_1_1alerting_1_1CompositeCondition.html">alerting::CompositeCondition</a> disk_condition;</div>
<div class="line">    disk_condition.<a class="code hl_variable" href="../../d8/d4a/structmonitoring__system_1_1alerting_1_1CompositeCondition.html#a563c1391170fe1e57df6b2557102d96f">op</a> = alerting::CompositeCondition::OR;</div>
<div class="line">    disk_condition.<a class="code hl_variable" href="../../d8/d4a/structmonitoring__system_1_1alerting_1_1CompositeCondition.html#af25549380525aeed397bcf00f9d2cc38">conditions</a>.push_back(<a class="code hl_struct" href="../../d1/d1a/structmonitoring__system_1_1alerting_1_1RuleCondition.html">alerting::RuleCondition</a>{</div>
<div class="line">        .<a class="code hl_variable" href="../../d1/d1a/structmonitoring__system_1_1alerting_1_1RuleCondition.html#a3066562df6108626e31c3b49e74afa63">metric_name</a> = <span class="stringliteral">&quot;system.disk.usage&quot;</span>,</div>
<div class="line">        .op = alerting::ConditionOperator::GREATER_THAN,</div>
<div class="line">        .threshold = 90.0</div>
<div class="line">    });</div>
<div class="line">    disk_condition.<a class="code hl_variable" href="../../d8/d4a/structmonitoring__system_1_1alerting_1_1CompositeCondition.html#af25549380525aeed397bcf00f9d2cc38">conditions</a>.push_back(<a class="code hl_struct" href="../../d1/d1a/structmonitoring__system_1_1alerting_1_1RuleCondition.html">alerting::RuleCondition</a>{</div>
<div class="line">        .<a class="code hl_variable" href="../../d1/d1a/structmonitoring__system_1_1alerting_1_1RuleCondition.html#a3066562df6108626e31c3b49e74afa63">metric_name</a> = <span class="stringliteral">&quot;system.disk.available&quot;</span>,</div>
<div class="line">        .op = alerting::ConditionOperator::LESS_THAN,</div>
<div class="line">        .threshold = 1000000000.0  <span class="comment">// 1GB</span></div>
<div class="line">    });</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> disk_rule = <a class="code hl_class" href="../../d5/d85/classmonitoring__system_1_1alerting_1_1RuleBuilder.html">alerting::RuleBuilder</a>(<span class="stringliteral">&quot;disk_space&quot;</span>)</div>
<div class="line">        .<a class="code hl_function" href="../../d5/d85/classmonitoring__system_1_1alerting_1_1RuleBuilder.html#ab892905220e5aebc8ecd6811ab283498">with_name</a>(<span class="stringliteral">&quot;Low Disk Space&quot;</span>)</div>
<div class="line">        .<a class="code hl_function" href="../../d5/d85/classmonitoring__system_1_1alerting_1_1RuleBuilder.html#a25894fe7108d6ac59e765556c561098d">with_severity</a>(alerting::AlertSeverity::WARNING)</div>
<div class="line">        .<a class="code hl_function" href="../../d5/d85/classmonitoring__system_1_1alerting_1_1RuleBuilder.html#a9c889830a354bdd58ccfb1dfe9a04593">with_composite_condition</a>(disk_condition)</div>
<div class="line">        .<a class="code hl_function" href="../../d5/d85/classmonitoring__system_1_1alerting_1_1RuleBuilder.html#a0c5c87264c4e552f38e930e53b75113c">build</a>();</div>
<div class="line"> </div>
<div class="line">    rule_engine.<a class="code hl_function" href="../../d6/d7d/classmonitoring__system_1_1alerting_1_1RuleEngine.html#aa2c5edef6a3640cf3b392cb6143fe25b">add_rule</a>(cpu_rule);</div>
<div class="line">    rule_engine.<a class="code hl_function" href="../../d6/d7d/classmonitoring__system_1_1alerting_1_1RuleEngine.html#aa2c5edef6a3640cf3b392cb6143fe25b">add_rule</a>(memory_rule);</div>
<div class="line">    rule_engine.<a class="code hl_function" href="../../d6/d7d/classmonitoring__system_1_1alerting_1_1RuleEngine.html#aa2c5edef6a3640cf3b392cb6143fe25b">add_rule</a>(disk_rule);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 3. Configure notifications</span></div>
<div class="line">    <a class="code hl_class" href="../../d6/d06/classmonitoring__system_1_1alerting_1_1NotificationManager.html">alerting::NotificationManager</a> notifier;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Slack for all alerts</span></div>
<div class="line">    <span class="keyword">auto</span> slack_config = std::make_shared&lt;alerting::SlackConfig&gt;();</div>
<div class="line">    slack_config-&gt;webhook_url = std::getenv(<span class="stringliteral">&quot;SLACK_WEBHOOK_URL&quot;</span>);</div>
<div class="line">    slack_config-&gt;channel = <span class="stringliteral">&quot;#monitoring-alerts&quot;</span>;</div>
<div class="line">    slack_config-&gt;use_attachments = <span class="keyword">true</span>;</div>
<div class="line">    notifier.<a class="code hl_function" href="../../d6/d06/classmonitoring__system_1_1alerting_1_1NotificationManager.html#ae2ccd59022a84a0c93ecdab750174a0e">add_channel_config</a>(<span class="stringliteral">&quot;slack_all&quot;</span>, slack_config);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Email for critical alerts</span></div>
<div class="line">    <span class="keyword">auto</span> email_config = std::make_shared&lt;alerting::EmailConfig&gt;();</div>
<div class="line">    email_config-&gt;smtp_server = <span class="stringliteral">&quot;smtp.gmail.com&quot;</span>;</div>
<div class="line">    email_config-&gt;smtp_port = 587;</div>
<div class="line">    email_config-&gt;use_tls = <span class="keyword">true</span>;</div>
<div class="line">    email_config-&gt;username = std::getenv(<span class="stringliteral">&quot;SMTP_USERNAME&quot;</span>);</div>
<div class="line">    email_config-&gt;password = std::getenv(<span class="stringliteral">&quot;SMTP_PASSWORD&quot;</span>);</div>
<div class="line">    email_config-&gt;from_address = <span class="stringliteral">&quot;monitoring@company.com&quot;</span>;</div>
<div class="line">    email_config-&gt;to_addresses = {<span class="stringliteral">&quot;oncall@company.com&quot;</span>};</div>
<div class="line">    notifier.<a class="code hl_function" href="../../d6/d06/classmonitoring__system_1_1alerting_1_1NotificationManager.html#ae2ccd59022a84a0c93ecdab750174a0e">add_channel_config</a>(<span class="stringliteral">&quot;email_critical&quot;</span>, email_config);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// PagerDuty for emergencies</span></div>
<div class="line">    <span class="keyword">auto</span> pagerduty_config = std::make_shared&lt;alerting::WebhookConfig&gt;();</div>
<div class="line">    pagerduty_config-&gt;url = <span class="stringliteral">&quot;https://events.pagerduty.com/v2/enqueue&quot;</span>;</div>
<div class="line">    pagerduty_config-&gt;headers[<span class="stringliteral">&quot;Authorization&quot;</span>] = std::getenv(<span class="stringliteral">&quot;PAGERDUTY_KEY&quot;</span>);</div>
<div class="line">    notifier.<a class="code hl_function" href="../../d6/d06/classmonitoring__system_1_1alerting_1_1NotificationManager.html#ae2ccd59022a84a0c93ecdab750174a0e">add_channel_config</a>(<span class="stringliteral">&quot;pagerduty&quot;</span>, pagerduty_config);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 4. Set up web dashboard</span></div>
<div class="line">    web::DashboardServer <a class="code hl_enumvalue" href="../../de/d3f/namespacemonitoring__system.html#a85c35f5354bb46fdd8f4e39a0aa37c9eacf1e8c14e54505f60aa10ceb8d5d8ab3">server</a>(8080);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Configure server</span></div>
<div class="line">    web::CorsConfig cors;</div>
<div class="line">    cors.allowed_origins = {<span class="stringliteral">&quot;*&quot;</span>};  <span class="comment">// Allow all origins for development</span></div>
<div class="line">    cors.enabled = <span class="keyword">true</span>;</div>
<div class="line">    <a class="code hl_enumvalue" href="../../de/d3f/namespacemonitoring__system.html#a85c35f5354bb46fdd8f4e39a0aa37c9eacf1e8c14e54505f60aa10ceb8d5d8ab3">server</a>.set_cors_config(cors);</div>
<div class="line"> </div>
<div class="line">    web::RateLimitConfig rate_limit;</div>
<div class="line">    rate_limit.requests_per_minute = 600;</div>
<div class="line">    rate_limit.burst_size = 100;</div>
<div class="line">    <a class="code hl_enumvalue" href="../../de/d3f/namespacemonitoring__system.html#a85c35f5354bb46fdd8f4e39a0aa37c9eacf1e8c14e54505f60aa10ceb8d5d8ab3">server</a>.set_rate_limit_config(rate_limit);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 5. Set up metric API</span></div>
<div class="line">    web::MetricAPI api;</div>
<div class="line">    api.set_rule_engine(std::make_shared&lt;alerting::RuleEngine&gt;(rule_engine));</div>
<div class="line">    api.register_routes(server);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 6. Start all services</span></div>
<div class="line">    notifier.<a class="code hl_function" href="../../d6/d06/classmonitoring__system_1_1alerting_1_1NotificationManager.html#aac01770668520e35b2b2a41fdca3fba6">start</a>();</div>
<div class="line">    rule_engine.<a class="code hl_function" href="../../d6/d7d/classmonitoring__system_1_1alerting_1_1RuleEngine.html#aa5cd190f4f3dee3d9ef4f2767da706fe">start_background_evaluation</a>();</div>
<div class="line">    <a class="code hl_enumvalue" href="../../de/d3f/namespacemonitoring__system.html#a85c35f5354bb46fdd8f4e39a0aa37c9eacf1e8c14e54505f60aa10ceb8d5d8ab3">server</a>.start();</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Monitoring system started:\n&quot;</span>;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;  - Dashboard: http://localhost:8080\n&quot;</span>;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;  - API: http://localhost:8080/api/v1\n&quot;</span>;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;  - WebSocket: ws://localhost:8080/ws/metrics\n&quot;</span>;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;\nPress Enter to stop...\n&quot;</span>;</div>
<div class="line">    std::cin.get();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 7. Cleanup</span></div>
<div class="line">    <a class="code hl_enumvalue" href="../../de/d3f/namespacemonitoring__system.html#a85c35f5354bb46fdd8f4e39a0aa37c9eacf1e8c14e54505f60aa10ceb8d5d8ab3">server</a>.stop();</div>
<div class="line">    rule_engine.<a class="code hl_function" href="../../d6/d7d/classmonitoring__system_1_1alerting_1_1RuleEngine.html#af55176ac6aa5b2e29cdee7269b6e0a6b">stop_background_evaluation</a>();</div>
<div class="line">    notifier.<a class="code hl_function" href="../../d6/d06/classmonitoring__system_1_1alerting_1_1NotificationManager.html#af254ad849eaf62b5487811736d8922cf">stop</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="abasic__usage__example_8cpp_html_ae66f6b31b5ad750f1fe042a706a4e3d4"><div class="ttname"><a href="../../db/d5d/basic__usage__example_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a></div><div class="ttdeci">int main()</div><div class="ttdef"><b>Definition</b> <a href="../../db/d5d/basic__usage__example_8cpp_source.html#l00015">basic_usage_example.cpp:15</a></div></div>
<div class="ttc" id="aclassmonitoring__system_1_1alerting_1_1AlertDeduplicationSystem_html"><div class="ttname"><a href="../../d5/dc0/classmonitoring__system_1_1alerting_1_1AlertDeduplicationSystem.html">monitoring_system::alerting::AlertDeduplicationSystem</a></div><div class="ttdef"><b>Definition</b> <a href="../../d4/d96/alert__deduplication_8h_source.html#l00240">alert_deduplication.h:240</a></div></div>
<div class="ttc" id="aclassmonitoring__system_1_1alerting_1_1AlertDeduplicationSystem_html_a22ddc0997286b75e0fa58966674b59c3"><div class="ttname"><a href="../../d5/dc0/classmonitoring__system_1_1alerting_1_1AlertDeduplicationSystem.html#a22ddc0997286b75e0fa58966674b59c3">monitoring_system::alerting::AlertDeduplicationSystem::get_deduplication</a></div><div class="ttdeci">AlertDeduplication &amp; get_deduplication()</div><div class="ttdef"><b>Definition</b> <a href="../../d4/d96/alert__deduplication_8h_source.html#l00257">alert_deduplication.h:257</a></div></div>
<div class="ttc" id="aclassmonitoring__system_1_1alerting_1_1AlertDeduplication_html_a67df3a62ffa12bfc28dba3d70e359298"><div class="ttname"><a href="../../d2/da4/classmonitoring__system_1_1alerting_1_1AlertDeduplication.html#a67df3a62ffa12bfc28dba3d70e359298">monitoring_system::alerting::AlertDeduplication::set_similarity_threshold</a></div><div class="ttdeci">void set_similarity_threshold(double threshold)</div></div>
<div class="ttc" id="aclassmonitoring__system_1_1alerting_1_1AlertDeduplication_html_a9ed042c1c820fa6c8a5c866df8332588"><div class="ttname"><a href="../../d2/da4/classmonitoring__system_1_1alerting_1_1AlertDeduplication.html#a9ed042c1c820fa6c8a5c866df8332588">monitoring_system::alerting::AlertDeduplication::set_deduplication_strategy</a></div><div class="ttdeci">void set_deduplication_strategy(DeduplicationStrategy strategy)</div></div>
<div class="ttc" id="aclassmonitoring__system_1_1alerting_1_1NotificationManager_html"><div class="ttname"><a href="../../d6/d06/classmonitoring__system_1_1alerting_1_1NotificationManager.html">monitoring_system::alerting::NotificationManager</a></div><div class="ttdef"><b>Definition</b> <a href="../../dd/d15/notification__manager_8h_source.html#l00199">notification_manager.h:199</a></div></div>
<div class="ttc" id="aclassmonitoring__system_1_1alerting_1_1NotificationManager_html_aac01770668520e35b2b2a41fdca3fba6"><div class="ttname"><a href="../../d6/d06/classmonitoring__system_1_1alerting_1_1NotificationManager.html#aac01770668520e35b2b2a41fdca3fba6">monitoring_system::alerting::NotificationManager::start</a></div><div class="ttdeci">void start()</div></div>
<div class="ttc" id="aclassmonitoring__system_1_1alerting_1_1NotificationManager_html_ae2ccd59022a84a0c93ecdab750174a0e"><div class="ttname"><a href="../../d6/d06/classmonitoring__system_1_1alerting_1_1NotificationManager.html#ae2ccd59022a84a0c93ecdab750174a0e">monitoring_system::alerting::NotificationManager::add_channel_config</a></div><div class="ttdeci">void add_channel_config(const std::string &amp;id, std::shared_ptr&lt; ChannelConfig &gt; config)</div></div>
<div class="ttc" id="aclassmonitoring__system_1_1alerting_1_1NotificationManager_html_af254ad849eaf62b5487811736d8922cf"><div class="ttname"><a href="../../d6/d06/classmonitoring__system_1_1alerting_1_1NotificationManager.html#af254ad849eaf62b5487811736d8922cf">monitoring_system::alerting::NotificationManager::stop</a></div><div class="ttdeci">void stop()</div></div>
<div class="ttc" id="aclassmonitoring__system_1_1alerting_1_1RuleBuilder_html"><div class="ttname"><a href="../../d5/d85/classmonitoring__system_1_1alerting_1_1RuleBuilder.html">monitoring_system::alerting::RuleBuilder</a></div><div class="ttdef"><b>Definition</b> <a href="../../d9/da4/rule__engine_8h_source.html#l00253">rule_engine.h:253</a></div></div>
<div class="ttc" id="aclassmonitoring__system_1_1alerting_1_1RuleBuilder_html_a0c5c87264c4e552f38e930e53b75113c"><div class="ttname"><a href="../../d5/d85/classmonitoring__system_1_1alerting_1_1RuleBuilder.html#a0c5c87264c4e552f38e930e53b75113c">monitoring_system::alerting::RuleBuilder::build</a></div><div class="ttdeci">AlertRule build() const</div><div class="ttdef"><b>Definition</b> <a href="../../d9/da4/rule__engine_8h_source.html#l00304">rule_engine.h:304</a></div></div>
<div class="ttc" id="aclassmonitoring__system_1_1alerting_1_1RuleBuilder_html_a25894fe7108d6ac59e765556c561098d"><div class="ttname"><a href="../../d5/d85/classmonitoring__system_1_1alerting_1_1RuleBuilder.html#a25894fe7108d6ac59e765556c561098d">monitoring_system::alerting::RuleBuilder::with_severity</a></div><div class="ttdeci">RuleBuilder &amp; with_severity(AlertSeverity severity)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/da4/rule__engine_8h_source.html#l00269">rule_engine.h:269</a></div></div>
<div class="ttc" id="aclassmonitoring__system_1_1alerting_1_1RuleBuilder_html_a9c889830a354bdd58ccfb1dfe9a04593"><div class="ttname"><a href="../../d5/d85/classmonitoring__system_1_1alerting_1_1RuleBuilder.html#a9c889830a354bdd58ccfb1dfe9a04593">monitoring_system::alerting::RuleBuilder::with_composite_condition</a></div><div class="ttdeci">RuleBuilder &amp; with_composite_condition(const CompositeCondition &amp;condition)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/da4/rule__engine_8h_source.html#l00279">rule_engine.h:279</a></div></div>
<div class="ttc" id="aclassmonitoring__system_1_1alerting_1_1RuleBuilder_html_ab892905220e5aebc8ecd6811ab283498"><div class="ttname"><a href="../../d5/d85/classmonitoring__system_1_1alerting_1_1RuleBuilder.html#ab892905220e5aebc8ecd6811ab283498">monitoring_system::alerting::RuleBuilder::with_name</a></div><div class="ttdeci">RuleBuilder &amp; with_name(const std::string &amp;name)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/da4/rule__engine_8h_source.html#l00259">rule_engine.h:259</a></div></div>
<div class="ttc" id="aclassmonitoring__system_1_1alerting_1_1RuleBuilder_html_ae31842c889a76de3d84f1897ea6608d0"><div class="ttname"><a href="../../d5/d85/classmonitoring__system_1_1alerting_1_1RuleBuilder.html#ae31842c889a76de3d84f1897ea6608d0">monitoring_system::alerting::RuleBuilder::add_annotation</a></div><div class="ttdeci">RuleBuilder &amp; add_annotation(const std::string &amp;key, const std::string &amp;value)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/da4/rule__engine_8h_source.html#l00299">rule_engine.h:299</a></div></div>
<div class="ttc" id="aclassmonitoring__system_1_1alerting_1_1RuleBuilder_html_aec4c063dfdd895143201fd431d7b683e"><div class="ttname"><a href="../../d5/d85/classmonitoring__system_1_1alerting_1_1RuleBuilder.html#aec4c063dfdd895143201fd431d7b683e">monitoring_system::alerting::RuleBuilder::with_condition</a></div><div class="ttdeci">RuleBuilder &amp; with_condition(const RuleCondition &amp;condition)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/da4/rule__engine_8h_source.html#l00274">rule_engine.h:274</a></div></div>
<div class="ttc" id="aclassmonitoring__system_1_1alerting_1_1RuleEngine_html"><div class="ttname"><a href="../../d6/d7d/classmonitoring__system_1_1alerting_1_1RuleEngine.html">monitoring_system::alerting::RuleEngine</a></div><div class="ttdef"><b>Definition</b> <a href="../../d9/da4/rule__engine_8h_source.html#l00166">rule_engine.h:166</a></div></div>
<div class="ttc" id="aclassmonitoring__system_1_1alerting_1_1RuleEngine_html_aa2c5edef6a3640cf3b392cb6143fe25b"><div class="ttname"><a href="../../d6/d7d/classmonitoring__system_1_1alerting_1_1RuleEngine.html#aa2c5edef6a3640cf3b392cb6143fe25b">monitoring_system::alerting::RuleEngine::add_rule</a></div><div class="ttdeci">void add_rule(const AlertRule &amp;rule)</div></div>
<div class="ttc" id="aclassmonitoring__system_1_1alerting_1_1RuleEngine_html_aa5cd190f4f3dee3d9ef4f2767da706fe"><div class="ttname"><a href="../../d6/d7d/classmonitoring__system_1_1alerting_1_1RuleEngine.html#aa5cd190f4f3dee3d9ef4f2767da706fe">monitoring_system::alerting::RuleEngine::start_background_evaluation</a></div><div class="ttdeci">void start_background_evaluation()</div></div>
<div class="ttc" id="aclassmonitoring__system_1_1alerting_1_1RuleEngine_html_af55176ac6aa5b2e29cdee7269b6e0a6b"><div class="ttname"><a href="../../d6/d7d/classmonitoring__system_1_1alerting_1_1RuleEngine.html#af55176ac6aa5b2e29cdee7269b6e0a6b">monitoring_system::alerting::RuleEngine::stop_background_evaluation</a></div><div class="ttdeci">void stop_background_evaluation()</div></div>
<div class="ttc" id="anamespacemonitoring__system_html"><div class="ttname"><a href="../../de/d3f/namespacemonitoring__system.html">monitoring_system</a></div><div class="ttdef"><b>Definition</b> <a href="../../df/d39/monitor__adapter_8h_source.html#l00008">monitor_adapter.h:8</a></div></div>
<div class="ttc" id="astructmonitoring__system_1_1alerting_1_1CompositeCondition_html"><div class="ttname"><a href="../../d8/d4a/structmonitoring__system_1_1alerting_1_1CompositeCondition.html">monitoring_system::alerting::CompositeCondition</a></div><div class="ttdef"><b>Definition</b> <a href="../../d9/da4/rule__engine_8h_source.html#l00074">rule_engine.h:74</a></div></div>
<div class="ttc" id="astructmonitoring__system_1_1alerting_1_1CompositeCondition_html_a563c1391170fe1e57df6b2557102d96f"><div class="ttname"><a href="../../d8/d4a/structmonitoring__system_1_1alerting_1_1CompositeCondition.html#a563c1391170fe1e57df6b2557102d96f">monitoring_system::alerting::CompositeCondition::op</a></div><div class="ttdeci">LogicalOperator op</div><div class="ttdef"><b>Definition</b> <a href="../../d9/da4/rule__engine_8h_source.html#l00076">rule_engine.h:76</a></div></div>
<div class="ttc" id="astructmonitoring__system_1_1alerting_1_1CompositeCondition_html_af25549380525aeed397bcf00f9d2cc38"><div class="ttname"><a href="../../d8/d4a/structmonitoring__system_1_1alerting_1_1CompositeCondition.html#af25549380525aeed397bcf00f9d2cc38">monitoring_system::alerting::CompositeCondition::conditions</a></div><div class="ttdeci">std::vector&lt; std::variant&lt; RuleCondition, std::shared_ptr&lt; CompositeCondition &gt; &gt; &gt; conditions</div><div class="ttdef"><b>Definition</b> <a href="../../d9/da4/rule__engine_8h_source.html#l00077">rule_engine.h:77</a></div></div>
<div class="ttc" id="astructmonitoring__system_1_1alerting_1_1RuleCondition_html"><div class="ttname"><a href="../../d1/d1a/structmonitoring__system_1_1alerting_1_1RuleCondition.html">monitoring_system::alerting::RuleCondition</a></div><div class="ttdef"><b>Definition</b> <a href="../../d9/da4/rule__engine_8h_source.html#l00064">rule_engine.h:64</a></div></div>
<div class="ttc" id="astructmonitoring__system_1_1alerting_1_1RuleCondition_html_a3066562df6108626e31c3b49e74afa63"><div class="ttname"><a href="../../d1/d1a/structmonitoring__system_1_1alerting_1_1RuleCondition.html#a3066562df6108626e31c3b49e74afa63">monitoring_system::alerting::RuleCondition::metric_name</a></div><div class="ttdeci">std::string metric_name</div><div class="ttdef"><b>Definition</b> <a href="../../d9/da4/rule__engine_8h_source.html#l00065">rule_engine.h:65</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md1822"></a>
Performance Considerations</h1>
<h2><a class="anchor" id="autotoc_md1823"></a>
Alert Engine Optimization</h2>
<ul>
<li>Use batch evaluation for multiple rules</li>
<li>Enable metric caching for frequently accessed data</li>
<li>Configure appropriate evaluation intervals</li>
<li>Use composite conditions judiciously</li>
</ul>
<h2><a class="anchor" id="autotoc_md1824"></a>
Notification Optimization</h2>
<ul>
<li>Configure appropriate retry delays</li>
<li>Use batch notifications where possible</li>
<li>Implement rate limiting per channel</li>
<li>Cache template rendering results</li>
</ul>
<h2><a class="anchor" id="autotoc_md1825"></a>
Dashboard Optimization</h2>
<ul>
<li>Enable HTTP compression</li>
<li>Use WebSocket for real-time updates</li>
<li>Implement client-side caching</li>
<li>Paginate large result sets</li>
</ul>
<h1><a class="anchor" id="autotoc_md1826"></a>
Troubleshooting</h1>
<h2><a class="anchor" id="autotoc_md1827"></a>
Common Issues</h2>
<h3><a class="anchor" id="autotoc_md1828"></a>
High Alert Volume</h3>
<ul>
<li>Review deduplication settings</li>
<li>Adjust rule thresholds</li>
<li>Increase cooldown periods</li>
<li>Configure silence windows</li>
</ul>
<h3><a class="anchor" id="autotoc_md1829"></a>
Notification Failures</h3>
<ul>
<li>Check channel configurations</li>
<li>Verify network connectivity</li>
<li>Review authentication credentials</li>
<li>Check rate limits</li>
</ul>
<h3><a class="anchor" id="autotoc_md1830"></a>
Dashboard Performance</h3>
<ul>
<li>Reduce query time ranges</li>
<li>Increase aggregation intervals</li>
<li>Enable response caching</li>
<li>Optimize WebSocket subscriptions</li>
</ul>
<h1><a class="anchor" id="autotoc_md1831"></a>
Migration Guide</h1>
<h2><a class="anchor" id="autotoc_md1832"></a>
From Existing Monitoring Systems</h2>
<h3><a class="anchor" id="autotoc_md1833"></a>
From Prometheus Alertmanager</h3>
<div class="fragment"><div class="line"><span class="comment">// Convert Prometheus rule</span></div>
<div class="line"><span class="comment">// alert: HighCPU</span></div>
<div class="line"><span class="comment">// expr: avg(cpu_usage) &gt; 80</span></div>
<div class="line"><span class="comment">// for: 5m</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> rule = RuleBuilder(<span class="stringliteral">&quot;HighCPU&quot;</span>)</div>
<div class="line">    .with_condition({</div>
<div class="line">        .metric_name = <span class="stringliteral">&quot;cpu_usage&quot;</span>,</div>
<div class="line">        .op = ConditionOperator::GREATER_THAN,</div>
<div class="line">        .threshold = 80.0,</div>
<div class="line">        .aggregation = AggregationFunction::AVG,</div>
<div class="line">        .window = std::chrono::minutes(5)</div>
<div class="line">    })</div>
<div class="line">    .build();</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md1834"></a>
From Grafana Alerts</h3>
<div class="fragment"><div class="line"><span class="comment">// Convert Grafana alert</span></div>
<div class="line"><span class="comment">// Condition: avg() OF query(A, 5m, now) IS ABOVE 80</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> rule = RuleBuilder(<span class="stringliteral">&quot;grafana_alert&quot;</span>)</div>
<div class="line">    .with_condition({</div>
<div class="line">        .metric_name = <span class="stringliteral">&quot;query_A&quot;</span>,</div>
<div class="line">        .op = ConditionOperator::GREATER_THAN,</div>
<div class="line">        .threshold = 80.0,</div>
<div class="line">        .aggregation = AggregationFunction::AVG,</div>
<div class="line">        .window = std::chrono::minutes(5)</div>
<div class="line">    })</div>
<div class="line">    .build();</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md1835"></a>
Best Practices</h1>
<h2><a class="anchor" id="autotoc_md1836"></a>
Alert Design</h2>
<ol type="1">
<li><b>Start with high thresholds</b> and gradually tune down</li>
<li><b>Use aggregation functions</b> to reduce noise</li>
<li><b>Set appropriate cooldown periods</b> to prevent alert storms</li>
<li><b>Include runbook links</b> in annotations</li>
<li><b>Use severity levels</b> consistently</li>
</ol>
<h2><a class="anchor" id="autotoc_md1837"></a>
Notification Strategy</h2>
<ol type="1">
<li><b>Route by severity</b>: Critical → PagerDuty, Warning → Slack</li>
<li><b>Implement escalation</b>: Email → Slack → SMS → Phone</li>
<li><b>Configure quiet hours</b> for non-critical alerts</li>
<li><b>Test notification channels</b> regularly</li>
<li><b>Document oncall procedures</b></li>
</ol>
<h2><a class="anchor" id="autotoc_md1838"></a>
Dashboard Design</h2>
<ol type="1">
<li><b>Group related metrics</b> in panels</li>
<li><b>Use consistent time ranges</b> across charts</li>
<li><b>Provide drill-down capabilities</b></li>
<li><b>Include alert status</b> indicators</li>
<li><b>Optimize for mobile</b> viewing</li>
</ol>
<h1><a class="anchor" id="autotoc_md1839"></a>
API Reference</h1>
<h2><a class="anchor" id="autotoc_md1840"></a>
Rule Engine API</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>RuleEngine {</div>
<div class="line">    <span class="keywordtype">void</span> add_rule(<span class="keyword">const</span> AlertRule&amp; rule);</div>
<div class="line">    <span class="keywordtype">void</span> update_rule(<span class="keyword">const</span> std::string&amp; rule_id, <span class="keyword">const</span> AlertRule&amp; rule);</div>
<div class="line">    <span class="keywordtype">void</span> remove_rule(<span class="keyword">const</span> std::string&amp; rule_id);</div>
<div class="line">    <span class="keywordtype">void</span> enable_rule(<span class="keyword">const</span> std::string&amp; rule_id);</div>
<div class="line">    <span class="keywordtype">void</span> disable_rule(<span class="keyword">const</span> std::string&amp; rule_id);</div>
<div class="line"> </div>
<div class="line">    RuleEvaluationResult evaluate_rule(<span class="keyword">const</span> std::string&amp; rule_id,</div>
<div class="line">                                      <span class="keyword">const</span> std::vector&lt;MetricDataPoint&gt;&amp; metrics);</div>
<div class="line">    std::vector&lt;Alert&gt; evaluate_all_rules(<span class="keyword">const</span> std::vector&lt;MetricDataPoint&gt;&amp; metrics);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> start_background_evaluation();</div>
<div class="line">    <span class="keywordtype">void</span> stop_background_evaluation();</div>
<div class="line">};</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1841"></a>
Notification Manager API</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>NotificationManager {</div>
<div class="line">    <span class="keywordtype">void</span> add_channel_config(<span class="keyword">const</span> std::string&amp; <span class="keywordtype">id</span>, std::shared_ptr&lt;ChannelConfig&gt; config);</div>
<div class="line">    <span class="keywordtype">void</span> add_template(<span class="keyword">const</span> NotificationTemplate&amp; tmpl);</div>
<div class="line"> </div>
<div class="line">    std::future&lt;NotificationResult&gt; send_notification(<span class="keyword">const</span> NotificationRequest&amp; request);</div>
<div class="line">    std::vector&lt;std::future&lt;NotificationResult&gt;&gt; notify_alert(<span class="keyword">const</span> Alert&amp; <a class="code hl_struct" href="../../dc/d19/structalert.html">alert</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> start();</div>
<div class="line">    <span class="keywordtype">void</span> stop();</div>
<div class="line">};</div>
<div class="ttc" id="astructalert_html"><div class="ttname"><a href="../../dc/d19/structalert.html">alert</a></div><div class="ttdef"><b>Definition</b> <a href="../../d4/d8b/iot__monitoring_8cpp_source.html#l00053">iot_monitoring.cpp:53</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1842"></a>
Dashboard Server API</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>DashboardServer {</div>
<div class="line">    <span class="keywordtype">bool</span> start();</div>
<div class="line">    <span class="keywordtype">void</span> stop();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> add_route(<span class="keyword">const</span> std::string&amp; path, HttpMethod method, HttpHandler handler);</div>
<div class="line">    <span class="keywordtype">void</span> add_websocket_endpoint(<span class="keyword">const</span> std::string&amp; path, WebSocketHandler handler);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> set_auth_config(<span class="keyword">const</span> AuthConfig&amp; config);</div>
<div class="line">    <span class="keywordtype">void</span> set_rate_limit_config(<span class="keyword">const</span> RateLimitConfig&amp; config);</div>
<div class="line">    <span class="keywordtype">void</span> set_cors_config(<span class="keyword">const</span> CorsConfig&amp; config);</div>
<div class="line">};</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md1843"></a>
Conclusion</h1>
<p>Phase 3 successfully transforms the <a class="el" href="../../de/d3f/namespacemonitoring__system.html">monitoring_system</a> into a complete observability platform with:</p><ul>
<li><b>Sophisticated alerting</b> with rule-based evaluation</li>
<li><b>Multi-channel notifications</b> with intelligent routing</li>
<li><b>Real-time web dashboard</b> with responsive design</li>
<li><b>Comprehensive API</b> for integration</li>
</ul>
<p>The implementation provides enterprise-grade features while maintaining high performance and reliability. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
